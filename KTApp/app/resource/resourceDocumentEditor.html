<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta id="Viewport" name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />


    <title>Twproject</title>


    <link id="twfavicon" rel="Shortcut Icon" type="image/ico" href="/img/favicon.png">
    <link rel="stylesheet" href="/commons/skin/default/platform.css?_=65022" type="text/css">



    <link rel=stylesheet href="/commons/skin/default/print.css?_=65022" type="text/css" media="print">



    <script src="/commons/js/jquery/jquery-2.1.3.min.js?65022"></script>


    <link href="/commons/js/scrollbar/perfect-scrollbar.css?_=65022" rel="stylesheet">
    <script src="/commons/js/scrollbar/perfect-scrollbar.min.js?_=65022"></script>


    <script src="/commons/js/platform.js?_=65022"></script>
    <script src="/commons/js/i18nJs.js?_=65022"></script>

    <script>
        /**
         * Check if is Mobile
         */
        if (typeof window.orientation !== 'undefined' && window.screen.width < 600 && readCookie("browseTwAsDefault") != 1 && true) {
            top.location.href = contextPath + "/mobile";
        }

        // keep as top



        var bodyScroll;
        var minutesToLock = 0;
        var localActivity = new Date().getTime();
        $(function () {

            //bodyScroll = new PerfectScrollbar('#twBody');

            $("body").on("mousemove keyup", function () {
                if (top.twComm) {
                    top.twComm.lastActivity = new Date().getTime();
                    localActivity = new Date().getTime();
                    if (top.twComm.isAway) // al primo movimento del mouse si dice che siamo svegli
                        top.twComm.checkAlive();
                }

            }).everyTime(10000, "alive", function () { //controlla lo stato ogni 10 sec.

                //websocket keep-alive
                if (top.twComm)
                    top.twComm.checkAlive();

                //test autoLogoff
                if (minutesToLock > 0 && (new Date().getTime() - localActivity) > minutesToLock * 60000) { //60 seconds
                    $(this).stopTime("alive");
                    muteAlertOnChange = true;
                    top.location = "/applications/teamwork/security/login.jsp?V_ID=1536729319&CM=LO";
                }
            });

            // http session keep alive
            $("body").everyTime(10 * 60 * 1000, "pingServer", function () { //10 min.
                $.get('/command.jsp');
            });

            if (typeof (top.manageFocusBlur) == "function")
                $(window).on("focus blur", top.manageFocusBlur)

        });

    </script>

</head>
<body id="twBody" class="level30 isPopup" level="30">
    <div id="floatWindow"></div>




    <div id="twMainContainerPopup">
        <div id="savingMessage" class="noprint">请稍候...</div>

        <div id="__FEEDBACKMESSAGEPLACE" style="display:none;"></div>
        <div id="twInnerContainerPopup" class="null">
            <form enctype="multipart/form-data" method="POST"
                  action="/resource/resourceDocumentEditor.html" name="d23841964" alertOnChange="true" id="d23841964"
                  savedAction="" savedTarget="">
                <input type="hidden" id="d23841964V_ID" name="V_ID" value="23841964" savedValue="">
                <input type="hidden" id="d23841964CM" name="CM" value="ED" savedValue="">
                <input type="hidden" id="d23841964OBJID" name="OBJID" value="2357" savedValue="">
                <input type="hidden" id="d23841964RES_ID" name="RES_ID" value="15089" savedValue="">


                <div class="mainColumn">

                    <input type=hidden name="DOC_ROOT_ID" id="DOC_ROOT_ID" size=1 autocomplete='off' maxlength=255 value=""><input type=hidden name="DOCUMENT_TYPE" id="DOCUMENT_TYPE" size=1 autocomplete='off' maxlength=255 value="1"><h1>上传 </h1>
                    <table class="table" border="0" cellpadding="5">
                        <tr>
                            <td valign="top" colspan="2">
                                <label for="DOCUMENT_UPLOAD_upl" class="required">文件上传*</label>
                                <br><table border="0" width="70" class="upvtable" uid="FR_1028_18.jpg+++\001028.18.jpg" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td nowrap>
                                            <span class="sp_fi" style="display:none;">
                                                <input type="file" oldvalue="1" name="DOCUMENT_UPLOAD" id="DOCUMENT_UPLOAD_upl" size="60" class="formElements" disabled>
                                            </span>

                                            <div title="FR_1028_18.jpg+++\001028.18.jpg" id="sp_tf_DOCUMENT_UPLOAD_upl" style="display:; overflow: hidden; max-width: 720px;" class="sp_tf formElements">
                                                <button type="button" class="button noprint textual   " id="domId_99169924" style="width:60;" onclick="openBlackPopup('https://demo.twproject.com/commons/layout/partUploaderView.jsp?V_ID=81397409&FILE_TO_UPLOAD=FR_1028_18.jpg%2B%2B%2B%5C001028.18.jpg&CK=khfn4nrp.7bda26752eb56b93f8bc8d836bb6aea6');return false; ">18.jpg</button>


                                            </div>
                                        </td>
                                        <td><img src="/img/uploader/unlink.png" border="0" name="d301602596" style="cursor:pointer; width:15px; margin-left:5px" id="d301602596" align="absmiddle" onClick='uplClickManage($(this));'></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <label for="DOCUMENT_NAME" class="required">文档名称*</label><br><input type=text name="DOCUMENT_NAME" id="DOCUMENT_NAME" size=50 class="formElements bold" autocomplete='off' maxlength=255 style=width:80% value="可爱的小狗狗" required="true" oldValue='1'>&nbsp;<small>(id: 2357)</small>
                                <input type=hidden name="IS_LOCKED" id="IS_LOCKED" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_IS_LOCKED" name="ck_IS_LOCKED" value="yes"
                                                                                                                                                                          onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');">
                                <label for="ck_IS_LOCKED">锁定</label>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <label for="DOCUMENT_VERSION" class=" ">调整</label><br><input type=text name="DOCUMENT_VERSION" id="DOCUMENT_VERSION" size=12 class="formElements" autocomplete='off' maxlength=255 value="02" oldValue='1'>
                            </td>
                            <td>
                                <label for="DOCUMENT_VERSION_LABEL" class=" ">修订标签</label><br><input type=text name="DOCUMENT_VERSION_LABEL" id="DOCUMENT_VERSION_LABEL" size=35 class="formElements" autocomplete='off' maxlength=255 value="小狗" oldValue='1'>
                            </td>

                            <td>

                                <label for="DOCUMENT_AUTHORED" class=" ">原始日期</label><br><input type=text name="DOCUMENT_AUTHORED" id="DOCUMENT_AUTHORED" size=8 class="formElements dateField validated date" autocomplete='off' maxlength=255 onchange="$(this).oneTime(100,'dfblur',function(){if ($(this).is('.formElementsError')) {$(this).focus();} });" format="yyyy-M-d" value="2020-11-9" oldValue='1' entryType="DATE" maxValue="3020-11-21" minValue="1020-10-31"><span title="日历" id="DOCUMENT_AUTHOREDs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:false,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>


                            </td>
                            <td>
                                <label for="DOCUMENT_AUTHOR_txt" class=" ">创建者</label><br><input type=text name="DOCUMENT_AUTHOR_txt" id="DOCUMENT_AUTHOR_txt" size=35 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,true );" onKeyDown="manageKeyEvent ($(this),event,false,true);" onKeyPress="stopKeyEvent(event);" value="Wing Dream"><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="DOCUMENT_AUTHOR" id="DOCUMENT_AUTHOR" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="" oldValue='1'>

                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">


                                <script type="text/javascript" src="/commons/layout/editIt/inc/jquery.mb.editIt.js"></script>
                                <script>
                                    //$(function () {
                                    $.editIt.defaults.lang = "zh_CN";
                                    $.editIt.defaults.toolbarAnimationTime = 250;

                                    $.editIt.plugins.defaults = [];

                                    $.editIt.plugins.defaults.push({ name: 'tableManager', options: {} });


                                    $.editIt.plugins.defaults.push({ name: 'imageManager', useMin: false, options: { toolbarPosition: 28, sendImageAsBlob: true, uploadFile: contextPath + "/commons/layout/editIt/editItAjaxController.jsp", repositoryPath: "", additionalData: { CM: "UPLIMG" } } });


                                    $.editIt.plugins.defaults.push({
                                        name: 'editorView', options: {
                                            viewSource: true,
                                            fullScreen: true,
                                            preview: false
                                        }
                                    });

                                    // })
                                </script>




                                <div style="background: #fff" id="div_SUMMA" class="editIt-content  " data-textarea-name="SUMMA">
                                    <div data-editable="true" style="min-height:200px; width:100%;">可爱的小狗狗<br>可爱的小狗狗<br><p>可爱的小狗狗<br></p><p><img src="https://demo.twproject.com/commons/layout/partUploaderView.jsp?V_ID=57803535&amp;FILE_TO_UPLOAD=FR_1025_nochk_9fbe-710b-cd0a-1e30.png%2B%2B%2B%5C001025.nochk_9fbe-710b-cd0a-1e30.png&amp;TREATASATTACH=yes" uid="9fbe-710b-cd0a-1e30" style="max-width:100%;"><br></p></div>
                                </div>
                                <script language="javascript" type="text/javascript">
                                    $(function () {
                                        //console.debug($.editIt.plugins.defaults);
                                        $('#div_SUMMA').editIt({ "toolbarIsOnTop": true, "toolbarIsAlwaysVisible": true, "blockImagesOnPaste": false, "toolBar": "default", "placeHolderText": "在这里写一些文字", "enablePreview": true, "readOnly": false, "required": false, "preserveOldValue": true });
                                    });
                                </script>

                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <label for="DOCUMENT_TAGS" class=" ">标签</label><br><input type=text name="DOCUMENT_TAGS" id="DOCUMENT_TAGS" size=50 class="formElements tagBox" autocomplete='off' maxlength=255 style=width:100% autocomplete='off' taggableClass="com.twproject.document.TeamworkDocument" maxResult="30" tagPropertyName="tags" areaId="5819" value="小狗" oldValue='1'>
                            </td>

                        </tr>
                    </table><div class="noprint buttonArea" id="domId_881877378" style="text-align:left;">
                        <div class="bbButtons">
                            <button type="button" class="button noprint    first big" id="domId_1928444099" style="" onClick="stopBubble(event);obj('d23841964CM').value='SV';if (canSubmitForm('d23841964'))  {$(':focus').blur();muteAlertOnChange=true;try {obj('d23841964').submit();} catch(e){};} ">保存文档</button>

                            <button type="button" class="button noprint    big" id="domId_1536771369" style="" onClick="stopBubble(event);obj('d23841964CM').value='ADD_VERSION';try {obj('d23841964').submit();} catch(e){};">创建修订</button>

                            <button type="button" class="button noprint    big delete" id="domId_1632099499" style="" onclick="deleteDocumentPreview(2357);return false; ">删除</button>

                        </div><div class="bbLoggedInfo">
                            <b>创建者</b>&nbsp;Dream Wing&nbsp;
                            <b>日期</b>&nbsp;2020-11-13 上午1:52&nbsp;&nbsp;&nbsp;<b>ID</b>&nbsp;
                            2357&nbsp;&nbsp;&nbsp;<b>域</b>&nbsp;
                            梦想飞扬<br><b>最后更新：</b>&nbsp;Dream Wing&nbsp;
                            <b>日期</b>&nbsp;2020-11-13 上午1:52
                        </div>
                    </div>
                    <script>

                        $(function () {
                            var closeBl = false;
                            var isValid = true;
                            if (isValid && closeBl) {
                                window.parent.$("body").oneTime(100, "doclrl", function () { window.parent.location.reload() });
                            }
                        });


                        function deleteDocumentPreview(docId) {
                            deletePreview("DOC_DEL", docId, function (response) {  // callback function
                                if (response && response.ok) {
                                    getBlackPopupOpener().$("tr[docId=" + docId + "]").remove();
                                    closeBlackPopup({ reload: false });
                                }
                            });
                        }

                    </script>

                </div>

            </form>



        </div>

    </div>

    <script src="/applications/teamwork/socket/userStatusManagement.js"></script>


    <div id="_errorTemplates" style="display:none;">
        <div class="__template__" type="errorTemplate">
            <!--
            <div style="padding:15px 12px" class="FFC_(#=type#) FFC_Global" type="(#=type#)">
              <table cellpadding="0" cellspacing="0" align="center" style="width:100%;">
                <tr>
                  <td valign="top" width="1" nowrap><img src="/img/(#=type.toLowerCase()#).png"></td>
                  <td valign="middle" class="_errorTemplateMessage" style="padding-left: 3px">(#if(obj.title){#)
                    <b>(#!title#)</b><br>
                    (#}#)(#=message#)<br></td>
                  <td width="1" valign="top" onclick="$(this).parents('div:first').fadeOut(function(){$(this.remove())})"><span class="teamworkIcon" style="cursor:pointer">x</span></td>
                </tr>
              </table>
            </div>
            -->
        </div>
    </div>

    <script>
        $(function () {
            if (true) {
                window.focus();
            }


            $("#_errorTemplates").loadTemplates().remove();
            var _messagesFromController = [];
            if (_messagesFromController.length > 0) {
                for (var i = 0; i < _messagesFromController.length; i++) {
                    showFeedbackMessage(_messagesFromController[i]);
                }
            }


            if (0)
                $("#null").focus();


            showUpgradeMessage();


            // EX liveQuery:  si inizializzano i fields
            $("body").initFields()
        });


        function showUpgradeMessage() {
            var levpg = $(".lreqPage:first");
            if (levpg.size() > 0) {

                var lv = 30;
                var reqLev = levpg.hasClass("lreq30") ? 30 : levpg.hasClass("lreq20") ? 20 : levpg.hasClass("lreq10") ? 10 : 0;
                if (lv > 0 && reqLev > lv) {
                    var str = reqLev == 0 ? "FULL" : reqLev == 5 ? "FREE" : reqLev == 10 ? "BASIC" : reqLev == 20 ? "ADVANCED" : reqLev == 30 ? "ENTERPRISE" : "TRIAL";

                    var wrp = $("<div>").addClass("modalPopup upgradeMessage").css("background", "none");
                    var inn = $("<div>").addClass("bwinPopupd").css({ "max-width": "360px", "min-height": "200px", top: "20%" }).click(function () {
                        location.href = contextPath + "/applications/teamwork/buyTwprojectLicense.jsp?rqlv=" + reqLev;
                    });
                    inn.append($("<h2>").html('Do you need more?'));
                    inn.append($("<p>").html('Your current plan does not include this feature. Upgrade your Twproject to "%%" plan in order to access it.'.replace("%%", str)));
                    //inn.append("<br><br>");
                    inn.append($("<p align='center'>").append($("<span>").addClass("button first").html('Twproject shop')));
                    wrp.append(inn)
                    levpg.after(wrp)
                }
            }
        }



    </script>
</body>
</html>



