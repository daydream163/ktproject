


<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta id="Viewport" name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />


    <title>Twproject</title>


    <link id="twfavicon" rel="Shortcut Icon" type="image/ico" href="/img/favicon.png">
    <link rel="stylesheet" href="/commons/skin/default/platform.css?_=65022" type="text/css">



    <link rel=stylesheet href="/commons/skin/default/print.css?_=65022" type="text/css" media="print">



    <script src="/commons/js/jquery/jquery-2.1.3.min.js?65022"></script>


    <link href="/commons/js/scrollbar/perfect-scrollbar.css?_=65022" rel="stylesheet">
    <script src="/commons/js/scrollbar/perfect-scrollbar.min.js?_=65022"></script>


    <script src="/commons/js/platform.js?_=65022"></script>
    <script src="/commons/js/i18nJs.js?_=65022"></script>

    <script>
        /**
         * Check if is Mobile
         */
        if (typeof window.orientation !== 'undefined' && window.screen.width < 600 && readCookie("browseTwAsDefault") != 1 && true) {
            top.location.href = contextPath + "/mobile";
        }

        // keep as top

        if (getTop() == top) {
            // quando si sta chiamando una pagina di TW (non nell'iframe) si fa il redirect sul wrapper /tw/...
            // top.location.href = contextPath + "/tw" + location.pathname + location.search;
        } else {
            if (window.location != getTop().location) {
                getTop().location = window.location;
            } else {
                // siamo giÃ  nel wrapper si modifica solo la url senza cambiare pagina
                top.history.replaceState("", document.title, contextPath + "/tw" + location.pathname + location.search);
            }
        }



        var bodyScroll;
        var minutesToLock = 0;
        var localActivity = new Date().getTime();
        $(function () {

            //bodyScroll = new PerfectScrollbar('#twBody');

            $("body").on("mousemove keyup", function () {
                if (top.twComm) {
                    top.twComm.lastActivity = new Date().getTime();
                    localActivity = new Date().getTime();
                    if (top.twComm.isAway) // al primo movimento del mouse si dice che siamo svegli
                        top.twComm.checkAlive();
                }

            }).everyTime(10000, "alive", function () { //controlla lo stato ogni 10 sec.

                //websocket keep-alive
                if (top.twComm)
                    top.twComm.checkAlive();

                //test autoLogoff
                if (minutesToLock > 0 && (new Date().getTime() - localActivity) > minutesToLock * 60000) { //60 seconds
                    $(this).stopTime("alive");
                    muteAlertOnChange = true;
                    top.location = "/applications/teamwork/security/login.jsp?V_ID=752189420&CM=LO";
                }
            });

            // http session keep alive
            $("body").everyTime(10 * 60 * 1000, "pingServer", function () { //10 min.
                $.get('/command.jsp');
            });

            if (typeof (top.manageFocusBlur) == "function")
                $(window).on("focus blur", top.manageFocusBlur)

        });

    </script>

</head>
<body id="twBody" class="level30 " level="30">
    <div id="floatWindow"></div>




    <div id="twMainContainer" style="">
        <div id="savingMessage">请稍候...</div>




        <div class="twHeader noprint">
            <div id="headerWrapper ">
                <a href="/app/getsThingsDone.html?V_ID=1534211288" class="twLogo withArrowRight" title="Home" id="twLogoMainMenu"></a>
                <div id="mainNav" class="noprint mainNav">
                    <table border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td id="DASHBOARD_MENU" ttitle="返回到主页.您可以通过自定义页面设置自己的个性化主页" class="withArrowRight">
                                <div style="position: relative">
                                    <span>
                                        <a class="button     hasDivomo noLabel" id="domId_652967887" style="" href="/app/getsThingsDone.html?V_ID=1853495134"></a>

                                        <span id="arrowOpener_divdomo_domId_789840639" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_789840639', 'arrowOpener_divdomo_domId_789840639'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                    </span>

                                    <div id="divdomo_domId_789840639" class="divomo divDark"
                                         style=" position: absolute;left:-10000px; top:-10000px;">

                                        <div class="divomoArrow"></div>

                                        <div>
                                            <a class="button  textual   " id="domId_479256288" style="" href="/helpDesk.page?V_ID=559379816">Help Desk</a>

                                            <a class="button  textual  focused " id="domId_1796756166" style="" href="/getsThingsDone.page?V_ID=1564594983">Get things done</a>

                                            <a class="button  textual   " id="domId_165837848" style="" href="/pm.page?V_ID=866970906">Project Manager</a>

                                            <a class="button  textual   " id="domId_1950421177" style="" href="/supervisor.page?V_ID=772486149">Supervisor</a>

                                            <a class="button  textual   " id="domId_1538334031" style="" href="/applications/teamwork/documentation/documentation.jsp?V_ID=881955108">关于</a>

                                        </div>
                                    </div>




                                </div>
                            </td>

                            <td id="TASK_MENU" ttitle="这是Twproject的入口点.一旦创建和分配,Twproject就将开始为团队工作.">
                                <span>
                                    <a class="button     hasDivomo" id="domId_1087368562" style="" href="/app/task/taskList.html?V_ID=2090878386">项目</a>

                                    <span id="arrowOpener_divdomo_domId_317585564" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_317585564', 'arrowOpener_divdomo_domId_317585564'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                </span>

                                <div id="divdomo_domId_317585564" class="divomo divDark"
                                     style=" position: absolute;left:-10000px; top:-10000px;">

                                    <div class="divomoArrow"></div>

                                    <div>
                                        <a class="button  textual   hasDivomo" id="domId_1087368562" style="" href="/app/task/taskList.html?V_ID=366775968">项目</a>

                                        <a class="button  textual   lreq10 lreqLabel" id="domId_1163711353" style="" href="/applications/teamwork/task/taskListAsGantt.jsp?V_ID=1234349379">Portfolio</a>

                                        <a class="button  textual   " id="domId_1363136642" style="" href="/app/documentList.html?V_ID=235258582">文档</a>

                                        <a class="button  textual   lreq20 lreqLabel" id="domId_881995898" style="" href="/applications/teamwork/task/financial/additionalCostList.jsp?V_ID=1112348647">额外费用</a>

                                        <hr><button type="button" class="button noprint textual   " id="domId_1233226119" style="" onclick="openBlackPopup('/applications/teamwork/task/taskNew.jsp?V_ID=1772926092&CM=AD','800px','720px');return false; "><span class="teamworkIcon withLabel" style="">P</span> 新建项目</button>

                                    </div>
                                </div>

                            </td>

                            <td id="TIMESHEET_MENU" ttitle="工时计划,工作记录,记录的有效性检查和分析.">
                                <span>
                                    <a class="button     lreq10 lreqActive hasDivomo" id="domId_1398562994" style="" href="/applications/teamwork/task/worklog/worklogWeek.jsp?V_ID=1502031349">工时表</a>

                                    <span id="arrowOpener_divdomo_WKLOGSM" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_WKLOGSM', 'arrowOpener_divdomo_WKLOGSM'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                </span>

                                <div id="divdomo_WKLOGSM" class="divomo divDark"
                                     style=" position: absolute;left:-10000px; top:-10000px;">

                                    <div class="divomoArrow"></div>

                                    <div>
                                        <a class="button  textual   lreq10 lreqLabel lreqActive" id="domId_1738697852" style="" href="/applications/teamwork/task/worklog/worklogWeek.jsp?V_ID=792756894">工时表</a>

                                        <button type="button" class="button noprint textual   lreq10 lreqLabel lreqActive" id="domId_1506146705" style="" onclick="openBlackPopup('/applications/teamwork/task/timeCounter.jsp?V_ID=1484813835&FOCUS_MILLIS=1605231724425',$(window).width()-100,$(window).height()-50);return false; ">计时器</button>

                                        <a class="button  textual   lreq20 lreqLabel" id="domId_1417923746" style="" href="/applications/teamwork/task/worklog/worklogOverview.jsp?V_ID=798877870">时间表概述</a>

                                        <a class="button  textual   lreq10 lreqLabel" id="domId_418368263" style="" href="/applications/teamwork/task/worklog/attendanceOverview.jsp?V_ID=35055314">出勤概述</a>

                                        <a class="button  textual   lreq20 lreqLabel lreqActive" id="domId_653935963" style="" href="/applications/teamwork/task/worklog/approval/worklogApprovalByResource.jsp?V_ID=1001208780&RES_ID=15089">工作记录审核</a>

                                        <a class="button  textual   lreq10 lreqLabel" id="domId_2027908442" style="" href="/applications/teamwork/task/worklog/worklogList.jsp?V_ID=839060384">工作记录分析</a>

                                        <a class="button  textual   lreq30 lreqLabel lreqActive" id="domId_344223157" style="" href="/applications/teamwork/task/financial/expenseList.jsp?V_ID=64243507">费用控制</a>

                                    </div>
                                </div>

                            </td>

                            <td id="PLAN_MENU" ttitle="PLAN_MENU_HELP" valign="bottom">
                                <span>
                                    <a class="button     lreq20 lreqActive hasDivomo" id="domId_1703831355" style="" href="/applications/teamwork/task/plan/planByResource.jsp?V_ID=42054122&CM=FIND_BY_ENTITY">计划</a>

                                    <span id="arrowOpener_divdomo_domId_1746634387" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_1746634387', 'arrowOpener_divdomo_domId_1746634387'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                </span>

                                <div id="divdomo_domId_1746634387" class="divomo divDark"
                                     style=" position: absolute;left:-10000px; top:-10000px;">

                                    <div class="divomoArrow"></div>

                                    <div>
                                        <a class="button  textual   lreq30 lreqActive lreqLabel" id="domId_1730171466" style="" href="/applications/teamwork/task/plan/planByResource.jsp?V_ID=408414596&CM=FIND_BY_ENTITY">计划</a>

                                        <a class="button  textual   lreq20 lreqActive lreqLabel" id="domId_2063248682" style="" href="/applications/teamwork/task/plan/operatorLoad.jsp?V_ID=1295415460">工作负荷</a>

                                    </div>
                                </div>

                            </td>

                            <td id="AGENDA_MENU" ttitle="个人的日程,共享的日程,会议">
                                <a href="/app/agendaWeekDay.html?V_ID=858422934&FOCUS_MILLIS=0" class="button">
                                    日程
                                </a>

                            </td>
                            <td id="ISSUES_MENU" ttitle="Twproject 提供了一个相当灵活的问题跟踪工具,并且将问题和项目很好的整合在一起.
To-do能够成为问题, 问题能够成为任务. 问题能够批量的从一个任务移动到另一个任务">
                                <span>
                                    <a class="button     hasDivomo" id="domId_719111192" style="" href="/app/issueList.html?V_ID=330738259">问题</a>

                                    <span id="arrowOpener_divdomo_domId_63838628" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_63838628', 'arrowOpener_divdomo_domId_63838628'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                </span>

                                <div id="divdomo_domId_63838628" class="divomo divDark"
                                     style=" position: absolute;left:-10000px; top:-10000px;">

                                    <div class="divomoArrow"></div>

                                    <div>
                                        <a class="button  textual   hasDivomo" id="domId_719111192" style="" href="/app/issueList.html?V_ID=92731878">问题</a>

                                        <a class="button  textual   lreq10 lreqLabel lreqActive" id="domId_1341480943" style="" href="/issue/issueOrganizer.html?V_ID=263027960">组织（看板）</a>

                                        <a class="button  textual   lreq20 lreqLabel lreqActive" id="domId_1986882795" style="" href="/issue/issuePlanner.html?V_ID=167952988">计划者</a>

                                    </div>
                                </div>

                            </td>

                            <td id="RESOURCE_MENU" ttitle="创建和管理用户,部门.他们可以作为资源被分派到项目/任务,问题中.">
                                <a href="/app/resourceList.html?V_ID=992357158" class="button">
                                    资源
                                </a>
                            </td>

                            <td id="TOOLS_MENU" ttitle="TOOLS_MENU_HELP">

                                <span>
                                    <a class="button     hasDivomo" id="domId_1188751904" style="" href="/app/toolsIntro.html?V_ID=966652108">工具</a>

                                    <span id="arrowOpener_divdomo_domId_1312882487" class="arrowOpener menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_1312882487', 'arrowOpener_divdomo_domId_1312882487'); event.stopPropagation(); event.preventDefault(); return false; "><span></span></span>

                                </span>

                                <div id="divdomo_domId_1312882487" class="divomo divDark"
                                     style=" position: absolute;left:-10000px; top:-10000px;">

                                    <div class="divomoArrow"></div>

                                    <div>
                                        <a class="button  textual   hasDivomo" id="domId_1188751904" style="" href="/app/toolsIntro.html?V_ID=408556732">工具</a>

                                        <a class="button  textual   " id="domId_221486084" style="" href="/applications/teamwork/board/boardList.jsp?V_ID=1843143012&CM=FN">讨论板</a>

                                        <hr><span class='menuTitle'>书签</span><a class="button  textual   " id="domId_1757993327" style="" href="https://www.baidu.com" target="_blank">- baidu</a>

                                        <a class="button  textual   " id="domId_1513831463" style="" href="https://oa.cnki.net" target="_blank">- OA</a>

                                        <a class="button  textual   " id="domId_1726632632" style="" href="https://www.cnki.net" target="_blank">- cnki</a>

                                        <hr><a class="button  textual   " id="domId_568124113" style="" href="/tools/manageFavorites.html?V_ID=64453103"><span class='teamworkIcon withLabel'>g</span>管理书签&nbsp;</a>

                                        <hr><button type="button" class="button noprint textual   " id="domId_749672629" style="" onclick="saveThisPageAsPreferred();return false; "><span class='teamworkIcon withLabel'>P</span>增加当前视图到书签</button>

                                    </div>
                                </div>

                            </td>

                        </tr>
                    </table>
                </div>

                <div class="menuTools">

                    <div id="HINT_SEARCH_span" class="menuSearch">
                        <input type=text name="search" id="search" size=15 class="searchInput" autocomplete='off' maxlength=255 value="" onkeyup="if (event.keyCode==13) { fastSearch($(this));event.preventDefault();return false;}" oldValue='1'><span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_keyDiv', 'domId_1304776001');  ">
                            <button type="button" class="button noprint textual icon  fastSearchkeysButton" id="domId_1304776001" style="" onclick=";return false; "><span class='teamworkIcon '>[</span></button>


                        </span>

                        <div id="divdomo_keyDiv" class="divomo fSKeys"
                             style=" position: absolute;left:-10000px; top:-10000px;">

                            <div class="divomoArrow"></div>

                            <div>
                                <span class='menuTitle'>Search in:</span><button type="button" class="button noprint textual   ALL" id="domId_416237446" style="" onclick="changeFastSearchKey('ALL');return false; ">全部</button>

                                <button type="button" class="button noprint textual   W" id="domId_1348516643" style="" onclick="changeFastSearchKey('W');return false; ">工作记录</button>

                                <button type="button" class="button noprint textual   T" id="domId_2124292110" style="" onclick="changeFastSearchKey('T');return false; ">项目</button>

                                <button type="button" class="button noprint textual   R" id="domId_1061861395" style="" onclick="changeFastSearchKey('R');return false; ">资源</button>

                                <button type="button" class="button noprint textual   I" id="domId_1115359195" style="" onclick="changeFastSearchKey('I');return false; ">问题</button>

                                <button type="button" class="button noprint textual   A" id="domId_457235702" style="" onclick="changeFastSearchKey('A');return false; ">日程</button>

                                <button type="button" class="button noprint textual   B" id="domId_1063954548" style="" onclick="changeFastSearchKey('B');return false; ">讨论板</button>

                                <button type="button" class="button noprint textual   D" id="domId_1935243314" style="" onclick="changeFastSearchKey('D');return false; ">文档</button>

                            </div>
                        </div><button type="button" class="button noprint textual icon  searchButton" id="domId_1994544583" style="" onclick="fastSearch($('#search'));return false; "><span class='teamworkIcon '>L</span></button>

                    </div>



                    <div id="loggedOp" class="loggedOp">
                        <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_816724661', 'domId_579977765');  ">
                            <span class="button buttonImg  operatorButton" id="domId_579977765" style=" " onclick=";return false; "><img src="/img/svgAvatar?code=WD&fill=hsl%28360%2C70%25%2C80%25%29&stroke=hsl%28360%2C90%25%2C20%25%29" border="0" name="d1719605813" title="Dream Wing" alt="Dream Wing" id="d1719605813" " resId="15089" class="face active"></span>

                        </span>

                        <div id="divdomo_domId_816724661" class="divomo divDark"
                             style=" position: absolute;left:-10000px; top:-10000px;">

                            <div class="divomoArrow"></div>

                            <div>
                                <span class="menuTitle">Dream Wing <em>(84)</em></span><a class="button  textual   " id="domId_493172378" style="" href="/resource/resourceEditor.html?V_ID=1124453063&CM=ED&OBJID=15089">我的联系方式</a>

                                <a class="button  textual   " id="domId_1608763273" style="" href="/resource/resourceSecurity.html?V_ID=1670373691&CM=ED&OBJID=15089">登录信息</a>

                                <a class="button  textual   " id="domId_1665213581" style="" href="/resource/resourceOptions.html?V_ID=1474626839&CM=EDIT_OPT&OBJID=15089">选项</a>

                                <a class="button  textual   " id="domId_1237768163" style="" href="/resource/resourceapp/documentList.html?V_ID=1586150567&CM=LIST_DOCS&RES_ID=15089">文档</a>

                                <hr><span class='menuTitle'>条消息</span><button type="button" class="button noprint textual   " id="domId_848363545" style="" onclick="openBlackPopup('/sticky/stickyEditor.html?V_ID=495427052&CM=AD&POP=yes','600px','600px');return false; ">发送短消息</button>

                                <button type="button" class="button noprint textual   " id="domId_538149697" style="" onclick="openBlackPopup('/sticky/stickyEditor.html?V_ID=1302168382&POP=yes&receiver=15089','600px','600px');return false; ">给自己发消息</button>

                                <hr><a class="button  textual   " id="domId_1628319962" style="" href="http://twproject.com/support" target="_blank">支持</a>

                                <hr><a class="button  textual   " id="domId_1789487613" style="" href="/applications/teamwork/security/login.jsp?V_ID=526582344&CM=LO" target="_top">注销</a>

                            </div>
                        </div>
                    </div>



                    <div id="twChatNotifications">
                        <div id="twChatOpener" class="messages button textual icon" onclick="twChatToggle();">

                            <span class="teamworkIcon"></span>

                            <span class="notificationNumber" style="display:none">0</span>
                        </div>
                    </div>
                    &nbsp;
                    &nbsp;

                    <div id="notifications">
                        <div id="messageListOpener" class="messages button textual icon" onclick="loadMessageList($(this));">
                            <span class="teamworkIcon">b</span>
                            <span class="notificationNumber" style="display:inline-block">10</span>
                        </div>
                    </div>

                    <div id="messageListBox" class="divomo divDark" style="position: absolute;left:-1000px; top:-1000px;">
                        <div class="divomoArrow"></div>
                        <span class="menuTitle">通知</span>
                        <div id="messageListPlace" class="messageListPlace"></div>
                        <div class="showAllMessages" onclick="$('#messageListBox').trigger('hideDivOnMouseover');">
                            <a class="button  textual   " id="domId_1586175935" style="" href="/applications/teamwork/messaging/messageListFull.jsp?V_ID=205768937">全部显示</a>

                        </div>
                    </div>


                    <div class="menuTimeCounter" style="display:none;"><a href="javascript:openBlackPopup('/applications/teamwork/task/timeCounter.jsp?V_ID=1438873688')" id="tcMenuCounter"></a></div>
                </div>
            </div>
        </div>

        <script>
            // unread messages managament
            $("#messageListBox").on("hideDivOnMouseover", function () {
                $.getJSON(contextPath + "/applications/teamwork/messaging/messageAjaxController.jsp", { CM: "READALL" }, function (response) {
                    jsonResponseHandling(response);
                    if (response.ok) {
                        $("#messageListOpener .notificationNumber").fadeOut().html("0");
                        $("#twChatOpener").data("totalUnreadChats", false);
                    }
                });
            });

            function followMessageLink(el) {
                var href = el.find(".message_link a:first").attr("href");
                if (href)
                    self.location.href = href;
            }

            function saveThisPageAsPreferred() {
                location.href = contextPath + "/tools/manageFavorites.html?CM=POSTLINK&URL=" + encodeURIComponent(location.href) + "&TITLE=" + encodeURIComponent(document.title);
            }

            (function tmStartup() {
                var counted = undefined;
                var format = '%0h:%0m:%0s';
                if (counted) {
                    var ndo = $("#tcMenuCounter");
                    ndo.attr("title", counted.taskName).data("time", counted.countingStartedMillis).activateTimeCounter(format);
                    ndo.parent().show();
                }

                registerEvent("timeCounterEvent", function (e, data) {

                    if (data.type == "start") {

                        if (data.response.assignment) {

                            //faccio partire il widget se c'Ã¨
                            var ndoWidget = getTop().$("body").find("tr[assid=" + data.response.assignment.id + "]");
                            if (ndoWidget) {
                                ndoWidget.addClass("highlight");
                                ndoWidget.find(".timeCounter").data("time", new Date().getTime()).show().activateTimeCounter();
                                ndoWidget.find(".play").removeClass("play").addClass("stop").find(".teamworkIcon").html("s");
                            }


                            //faccio partire il counter sul menu
                            var ndoMenu = $("#tcMenuCounter");
                            ndoMenu.stopTimeCounter().attr("title", data.response.assignment.taskName).data("time", data.response.assignment.countingStartedMillis).activateTimeCounter(format);
                            ndoMenu.parent().show();
                        }

                    } else if (data.type == "stop") {

                        //fermo il widget
                        var ndoWidget = getTop().$("body").find(".stop").closest("tr");
                        if (ndoWidget) {
                            ndoWidget.removeClass("highlight");
                            ndoWidget.find(".timeCounter").stopTimeCounter().hide();
                            ndoWidget.find(".stop").removeClass("stop").addClass("play").find(".teamworkIcon").html("a");
                        }

                        //faccio fermare il counter sul menu
                        var ndoMenu = $("#tcMenuCounter");
                        ndoMenu.stopTimeCounter();
                        ndoMenu.parent().hide();
                    }
                })
            })();

            function twChatToggle() {
                //console.debug(top.twChat.chatWindow.is(".closed"))

                if (top.twChat.chatWindow.is(".closed")) {
                    top.twChat.open();
                } else if ($("#twChatOpener .notificationNumber").is(":visible")) {
                    top.twChat.chatWindow.addClass('showChats');
                } else {
                    top.twChat.close();
                }
            }


            $(function () {
                //lo stato del socket lo sa solo il client lato js -> twComm
                if (!top.twComm || !top.twComm.isOpen)
                    getTop().$("#twChatOpener").addClass("disabled");

                /**
                 * Manage chat opener state at start (chat could be open)
                 */
                if (getTop() != top && top.twChat && top.twChat.chatWindow && top.twChat.chatWindow.is(".closed")) {
                    $("#twChatOpener").removeClass("open");
                } else {
                    $("#twChatOpener").addClass("open");
                }

            })
        </script>


        <div id="__FEEDBACKMESSAGEPLACE" style="display:none;"></div>
        <div id="twInnerContainer" class="null">

            <form enctype="multipart/form-data" method="POST"
                  action="/resource/resourceJobSettings.html" name="d336725349" alertOnChange="true" id="d336725349"
                  savedAction="" savedTarget="">
                <input type="hidden" id="d336725349V_ID" name="V_ID" value="336725349" savedValue="">
                <input type="hidden" id="d336725349CM" name="CM" value="ED" savedValue="">
                <input type="hidden" id="d336725349OBJID" name="OBJID" value="15089" savedValue="">



                <link rel="stylesheet" href="../../../commons/js/jquery/jRange/jquery.range.css">
                <script src="../../../commons/js/jquery/jRange/jquery.range.js"></script>


                <div class="mainColumn">


                    <div class="profileImage canWrite" onclick="openProfileImageEditor('15089')" style="cursor: pointer">
                        <img src="/img/svgAvatar?code=WD&fill=hsl%28360%2C70%25%2C80%25%29&stroke=hsl%28360%2C90%25%2C20%25%29" border="0" name="personalAvatar" title="Dream Wing" alt="Dream Wing" id="personalAvatar" " resId="15089" class="face active"><div class="imageUploaderOpener"><span class="teamworkIcon " style="cursor: pointer">e</span></div>
                    </div>

                    <script>
                        $("#RESOURCE_MENU").addClass('selected');

                        function openProfileImageEditor(resId, callback) {
                            $(".uploadizeDrop").attr("disabled", "true");
                            openBlackPopup(contextPath + "/applications/teamwork/resource/resourceImageUploader.jsp?RES_ID=" + resId, '500px', '550px', function (response) {
                                if (response && response.imageUrl) {
                                    $(".profileImage img,.imageUploaderOpener img").prop("src", response.imageUrl);
                                    if (true) { //se sto cambiando l'utente loggato cambio subito anche il profilo
                                        $(".menuTools .avatarImage img").prop("src", response.imageUrl)
                                    }
                                }
                            });
                        }

                    </script>

                    <div class="pathToObject">
                        <a class="button  textual   " id="domId_1590897767" style="" href="resourceList.jsp?V_ID=1527442596">资源 /</a>

                        <a class="button  textual   " id="domId_708194734" style="" href="/resource/resourceJobSettings.html?V_ID=1900518670&CM=ED&OBJID=15090">梦想飞扬部门</a>

                        <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_1906240663', 'domId_1976125474');  ">
                            <button type="button" class="button noprint textual icon  " id="domId_1976125474" style="" onclick=";return false; "><span class='teamworkIcon '>&ugrave;</span></button>


                        </span>

                        <div id="divdomo_domId_1906240663" class="divomo "
                             style=" position: absolute;left:-10000px; top:-10000px;">

                            <div class="divomoArrow"></div>

                            <div>
                                <a class="button  textual   " id="domId_2025777095" style="" href="/resource/resourceJobSettings.html?V_ID=1866704153&CM=ED&OBJID=15189">Fei Zhang</a>

                                <button type="button" class="button  textual   " disabled id="domId_1029896127" style="">Wing Dream</button>

                                <a class="button  textual   " id="domId_746011669" style="" href="/resource/resourceJobSettings.html?V_ID=2083857145&CM=ED&OBJID=15163">第一个员工 </a>

                            </div>
                        </div>
                        <div class="currentNode">

                            <a class="button  textual   objectName" id="domId_76237092" style="" href="/resource/resourceJobSettings.html?V_ID=979568382&CM=ED&OBJID=15089">Wing Dream</a>

                        </div>
                    </div>



                    <div class="pathCodeWrapper clearfix"><div class="pathCode">R#15089#</div></div>

                    <div class="tabSetBox" style="">
                        <input type=hidden name="RESOURCE_TABSET" id="RESOURCE_TABSET" size=20 class="formElements" autocomplete='off' maxlength=255 value="RESOURCE_JOB_SETTINGS_TAB">
                        <div class="tabSetHeader noprint">
                            <div class="tabSetPre"></div>
                            <div class="tabSetTabs" id="TABSETTABS_RESOURCE_TABSET">
                                <div id="RESOURCE_GENERAL_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="domId_643358832" style="" href="/resource/resourceEditor.html?V_ID=1490964337&CM=ED&OBJID=15089">资源信息</a>


                                </div>

                                <div id="RESOURCE_JOB_SETTINGS_TAB" tabset="RESOURCE_TABSET" class="tabSelected tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="domId_1596978109" style="" href="/resource/resourceJobSettings.html?V_ID=191818216&CM=ED&OBJID=15089">工作设置</a>


                                </div>

                                <div id="RESOURCE_SECURITY_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="hintFirstSecurity" style="" href="/resource/resourceSecurity.html?V_ID=1842987863&CM=ED&OBJID=15089">安全性/登录</a>


                                </div>

                                <div id="GENERAL_OPTIONS_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="hintFirstOption" style="" href="/resource/resourceOptions.html?V_ID=158313978&CM=EDIT_OPT&OBJID=15089">选项</a>


                                </div>

                                <div id="RESOURCE_ASSIG_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="domId_709555179" style="" href="/resource/resourceAssignments.html?V_ID=1070017832&CM=ED&OBJID=15089">分工</a>


                                </div>

                                <div id="DOCUMENTS_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="domId_1742013825" style="" href="/resource/resourceapp/documentList.html?V_ID=1922053802&CM=LIST_DOCS&RES_ID=15089">文档</a>


                                </div>

                                <div id="TASK_SUBSCRIPTIONS_TAB" tabset="RESOURCE_TABSET" class=" tab" style="cursor:pointer;">
                                    <a class="button  textual   " id="domId_977785110" style="" href="/resource/resourceSubscriptions.html?V_ID=1733541563&CM=ED&OBJID=15089">订阅</a>


                                </div>

                            </div>
                            <div class="tabSetPost"></div>
                        </div>
                        <div class="tabContainer clearfix" id="TABSETPART_RESOURCE_TABSET">



                        </div>
                    </div>



                    <div class="inlineContainerWrapper">

                        <div class="container   ">

                            <table class="table">
                                <tr>
                                    <td style="width: 600px; padding-right:20px; " valign="top">
                                        <a class="button textual" style="display:none" onclick="$('#wrkplnedit').removeClass('disabled faded');$(this).remove()">该资源继承其部门的工作计划。 <br>单击以对其进行编辑。</a>

                                        <div id="wrkplnedit" class="">
                                            <label for="ck_USE_FLAT_CAPACITY">不要使用工作计划并设置资源日常容量</label>&nbsp;<input type=hidden name="USE_FLAT_CAPACITY" id="USE_FLAT_CAPACITY" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_USE_FLAT_CAPACITY" name="ck_USE_FLAT_CAPACITY" value="yes"
                                                                                                                                                                                                                                                                       onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');flatCapacity($(this))">
                                            <span id="flatCapacityInput" style="margin-left: 20px; display:none">
                                                &nbsp;&nbsp;<input type=text name="WORK_DAILY_CAPACITY" id="WORK_DAILY_CAPACITY" size=7 class="formElements validated time" autocomplete='off' maxlength=255 value="0:00" oldValue='1' entryType="TIME">
                                            </span>

                                            <table cellpadding="10" cellspacing="3" id="weekCapacity" style="margin-top: 10px;" class="">


                                                <tr class="dayCursors dayH;">
                                                    <td>
                                                        <input type=hidden name="CK_1" id="CK_1" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_CK_1" name="ck_CK_1" value="yes" disabled
                                                                                                                                                                                        onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_1">星期日</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_1_A" id="DAY_1_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="0,0" oldValue='1'><input type=hidden name="DAY_1_B" id="DAY_1_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors ;">
                                                    <td>
                                                        <input type=hidden name="CK_2" id="CK_2" size=1 autocomplete='off' maxlength=255 data-checkfield value="yes" oldValue='1'><input type="checkbox" id="ck_CK_2" name="ck_CK_2" checked value="yes"
                                                                                                                                                                                         onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_2">星期一</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_2_A" id="DAY_2_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="30600000,43200000" oldValue='1'><input type=hidden name="DAY_2_B" id="DAY_2_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="46800000,63000000" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors ;">
                                                    <td>
                                                        <input type=hidden name="CK_3" id="CK_3" size=1 autocomplete='off' maxlength=255 data-checkfield value="yes" oldValue='1'><input type="checkbox" id="ck_CK_3" name="ck_CK_3" checked value="yes"
                                                                                                                                                                                         onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_3">星期二</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_3_A" id="DAY_3_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="30600000,43200000" oldValue='1'><input type=hidden name="DAY_3_B" id="DAY_3_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="46800000,63000000" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors ;">
                                                    <td>
                                                        <input type=hidden name="CK_4" id="CK_4" size=1 autocomplete='off' maxlength=255 data-checkfield value="yes" oldValue='1'><input type="checkbox" id="ck_CK_4" name="ck_CK_4" checked value="yes"
                                                                                                                                                                                         onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_4">星期三</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_4_A" id="DAY_4_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="30600000,43200000" oldValue='1'><input type=hidden name="DAY_4_B" id="DAY_4_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="46800000,63000000" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors ;">
                                                    <td>
                                                        <input type=hidden name="CK_5" id="CK_5" size=1 autocomplete='off' maxlength=255 data-checkfield value="yes" oldValue='1'><input type="checkbox" id="ck_CK_5" name="ck_CK_5" checked value="yes"
                                                                                                                                                                                         onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_5">星期四</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_5_A" id="DAY_5_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="30600000,43200000" oldValue='1'><input type=hidden name="DAY_5_B" id="DAY_5_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="46800000,63000000" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors ;">
                                                    <td>
                                                        <input type=hidden name="CK_6" id="CK_6" size=1 autocomplete='off' maxlength=255 data-checkfield value="yes" oldValue='1'><input type="checkbox" id="ck_CK_6" name="ck_CK_6" checked value="yes"
                                                                                                                                                                                         onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_6">星期五</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_6_A" id="DAY_6_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="30600000,43200000" oldValue='1'><input type=hidden name="DAY_6_B" id="DAY_6_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="46800000,63000000" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                                <tr class="dayCursors dayH;">
                                                    <td>
                                                        <input type=hidden name="CK_7" id="CK_7" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_CK_7" name="ck_CK_7" value="yes" disabled
                                                                                                                                                                                        onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');dayOnOff($(this))">
                                                        &nbsp;<label for="ck_CK_7">星期六</label>&nbsp;
                                                    </td>
                                                    <td><input type=hidden name="DAY_7_A" id="DAY_7_A" size=2 class="formElements dayHoursA grayed" autocomplete='off' readonly maxlength=255 value="0,0" oldValue='1'><input type=hidden name="DAY_7_B" id="DAY_7_B" size=2 class="formElements dayHoursB grayed" autocomplete='off' readonly maxlength=255 value="" oldValue='1'></td>
                                                    <td align="left"><span class="totWorkByDay"></span></td>
                                                </tr>

                                            </table>
                                        </div>
                                    </td>

                                    <td valign="top">

                                        <label for="HOURLY_COST" class=" ">小时薪酬</label><br><input type=text name="HOURLY_COST" id="HOURLY_COST" size=7 class="formElements validated currency" autocomplete='off' maxlength=255 value="0.00" oldValue='1' entryType="CURRENCY"><br><br>
                                        <label for="HIRING_DATE" class=" ">雇用日期</label><br><input type=text name="HIRING_DATE" id="HIRING_DATE" size=8 class="formElements dateField validated date" autocomplete='off' maxlength=255 onchange="$(this).oneTime(100,'dfblur',function(){if ($(this).is('.formElementsError')) {$(this).focus();} });" format="yyyy-M-d" value="" oldValue='1' entryType="DATE" maxValue="3020-11-21" minValue="1020-10-31"><span title="日历" id="HIRING_DATEs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                 onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:false,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                                        <br><br><label for="COST_CENTER_txt" class=" ">费用中心</label><br><input type=text name="COST_CENTER_txt" id="COST_CENTER_txt" size=25 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,false );" onKeyDown="manageKeyEvent ($(this),event,false,false);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="COST_CENTER" id="COST_CENTER" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="" oldValue='1'>
                                        <br><br><label for="JOB_DESCRIPTION" class=" ">职务描述</label><br><textarea name="JOB_DESCRIPTION" id="JOB_DESCRIPTION" COLS="20" ROWS="3" class="formElements" style='width:100%;height:130px' oldValue='1' maxlength=2000 onKeyUp="limitSize(this);" onKeyDown="limitSize(this);" onBlur="limitSize(this);"></textarea>
                                    </td>
                                </tr>

                            </table>

                            <div class="noprint buttonArea" id="domId_1457466779" style="text-align:left;">
                                <div class="bbButtons">
                                    <button type="button" class="button noprint    first big" id="domId_1445676971" style="" onClick="stopBubble(event);obj('d336725349CM').value='SAVE_JOB_SETTINGS';if (canSubmitForm('d336725349'))  {$(':focus').blur();muteAlertOnChange=true;try {obj('d336725349').submit();} catch(e){};} ">保存</button>

                                </div><div class="bbLoggedInfo">
                                    <b>创建者</b>&nbsp;-&nbsp;
                                    <b>日期</b>&nbsp;2020-11-2 上午5:08&nbsp;&nbsp;&nbsp;<b>ID</b>&nbsp;
                                    15089&nbsp;&nbsp;&nbsp;<b>域</b>&nbsp;
                                    梦想飞扬<br><b>最后更新：</b>&nbsp;Dream Wing&nbsp;
                                    <b>日期</b>&nbsp;2020-11-9 上午10:05
                                </div>
                            </div>

            </form>


        </div>




        <div class="container ">

            <div class="separator"></div>
            <div class="buttonBoxInline">
                <a class="button  textual   " id="domId_992985072" style="" title="日程" href="/app/agendaWeekDay.html?V_ID=64559108&CM=FIND_BY_ENTITY&REFERRAL_TYPE=com.twproject.resource.Resource&REFERRAL_ID=15089"><span class='teamworkIcon withLabel'>m</span>日程</a>

                <button type="button" class="button noprint textual   " id="domId_581572478" style="" onclick="openBlackPopup('/applications/teamwork/messaging/composeMessage.jsp?V_ID=565686421&CM=FIND_BY_ENTITY&REFERRAL_TYPE=com.twproject.resource.Resource&REFERRAL_ID=15089','800px','600px');return false; "><span class='teamworkIcon withLabel'>&#xec;</span>发送消息</button>

                <div class="separator"></div><a class="button  textual   small lreq30 lreqLabel" id="domId_1290560249" style="" title="计划" href="/applications/teamwork/task/plan/planByResource.jsp?V_ID=1329193321&CM=FIND_BY_ENTITY&REFERRAL_TYPE=com.twproject.resource.Resource&REFERRAL_ID=15089">计划</a>

                <a class="button  textual   small lreq20 lreqLabel lreqActive" id="domId_1627249953" style="" title="工作负荷" href="/applications/teamwork/task/plan/operatorLoad.jsp?V_ID=1231992524&CM=FIND_BY_ENTITY&REFERRAL_TYPE=com.twproject.resource.Resource&REFERRAL_ID=15089">工作负荷</a>

                <a class="button  textual   small" id="domId_61026494" style="" title="时间表概述" href="/applications/teamwork/task/worklog/worklogOverview.jsp?V_ID=83520376&CM=FIND_BY_ENTITY&REFERRAL_TYPE=com.twproject.resource.Resource&REFERRAL_ID=15089">时间表概述</a>

                <a class="button  textual   small lreq20 lreqLabel lreqActive" id="domId_1420137941" style="" title="工作记录审核" href="/applications/teamwork/task/worklog/approval/worklogApprovalByResource.jsp?V_ID=1325706768&CM=dummy&RES_ID=15089">工作记录审核</a>

            </div>
            <div class="workgroup">
                <div class="separator dark"></div><h2>Wing的同事</h2><div class="workgroupResource">
                    <a class="button  textual   small" id="domId_1493943090" style="overflow: hidden;text-overflow: ellipsis; white-space: nowrap;width:100%;" href="/resource/resourceEditor.html?V_ID=1439602467&CM=ED&OBJID=15163">第一个员工 </a>


                    <div class="workgroupAD"></div>
                </div><div class="workgroupResource">
                    <a class="button  textual   small" id="domId_1847895767" style="overflow: hidden;text-overflow: ellipsis; white-space: nowrap;width:100%;" href="/resource/resourceEditor.html?V_ID=1954853696&CM=ED&OBJID=15189">Fei Zhang</a>


                    <div class="workgroupAD"></div>
                </div>
            </div>
            <div class="separator dark"></div>

            <div class="documents">
                <h2>
                    <span onClick="stopBubble(event);try{ window.open('/resource/resourceapp/documentList.html?V_ID=1834008688&CM=LIST_DOCS&RES_ID=15089','_self','') } catch(e){};" style="cursor:pointer;display: inline">文档</span>


                    <span style="float:right;font-size: 14px;padding-top: 7px;">
                        <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_547329750', 'domId_1351233825');  ">
                            <button type="button" class="button noprint textual icon  edit" id="domId_1351233825" style="" title="添加" onclick=";return false; "><span class='teamworkIcon '>P</span></button>


                        </span>

                        <div id="divdomo_domId_547329750" class="divomo "
                             style=" position: absolute;left:-10000px; top:-10000px;">

                            <div class="divomoArrow"></div>

                            <div>
                                <button type="button" class="button noprint textual   " id="domId_1503135782" style="" onclick="openBlackPopup('/resource/resourceDocumentEditor.html?V_ID=1298648149&CM=AD&RES_ID=15089&DOCUMENT_TYPE=1','1000px','700px');return false; ">+ 上传文件</button>

                                <button type="button" class="button noprint textual   " id="domId_92617786" style="" onclick="openBlackPopup('/resource/resourceDocumentEditor.html?V_ID=205464766&CM=AD&RES_ID=15089&DOCUMENT_TYPE=4','1000px','700px');return false; ">+ 创建一个文件存储的链接</button>

                                <button type="button" class="button noprint textual   " id="domId_1531493228" style="" onclick="openBlackPopup('/resource/resourceDocumentEditor.html?V_ID=1848968874&CM=AD&RES_ID=15089&DOCUMENT_TYPE=3','1000px','700px');return false; ">+ 添加一个链接（URL）</button>

                                <button type="button" class="button noprint textual   " id="domId_1647888315" style="" onclick="openBlackPopup('/resource/resourceDocumentEditor.html?V_ID=67690054&CM=AD&RES_ID=15089&DOCUMENT_TYPE=2','1000px','700px');return false; ">+ 写一个文件</button>

                            </div>
                        </div>
                    </span>
                </h2>


                <div id="trDropLine"><div id="docDropArea" style="display: none" class="uploadizeDrop"></div><div id="pendingUpload"></div></div>
                <script>
                    $(function () {
                        $("#docDropArea").uploadize({
                            url: "resourceAjaxController.jsp",
                            fileAreaSelector: "#pendingUpload",
                            maxSize: 20971520,
                            additionalRequestParameters: { CM: "DROPDOC", OBJID: 15089 },
                            onLoadCallback: function (response) {
                                jsonResponseHandling(response);
                                if (response.ok) {

                                    var fileWrapper = $("<div/>").addClass("docLabelWrapper");
                                    var dr = $(response.docHRef);
                                    var image = $("<img>"); //response.docMime;
                                    image.attr({ src: contextPath + "/img/mime/" + response.docMime }).css({ width: 20 });
                                    fileWrapper.append(image).append(dr);
                                    $("#documentList").append(fileWrapper);
                                    dr.effect("highlight", { color: "#F9EFC5" }, 2500);

                                }
                            }
                        });
                    });
                </script>


                <div id="documentList" class="textSmall">
                    <div class="docLabelWrapper">
                        <img src="/img/mime/content.png" width="30" border="0" name="d323141985" id="d323141985"><a href="javascript:openBlackPopup('/applications/teamwork/document/documentContentViewer.jsp?V_ID=718120188&CM=ED&OBJID=2341&POP=yes')" id="cl_2341">tests</a>

                    </div>
                </div>

            </div>
        </div>

    </div>
    </div>


    <style>
        .dayCursors { height: 50px; }

        .theme-blue.A .pointer { border-radius: 5px 5px 0 0; }
        .theme-blue.B .pointer { border-radius: 0 0 5px 5px; }

        .totWorkByDay { font-size: 8px; color: #999; }
    </style>

    <script>
        $(function () {

            var scale = [];
            for (var i = 0; i <= 12; i++)
                scale[i] = getMillisInHours(i * 2 * 3600000);

            $('.dayHoursA').jRange({
                from: 0,
                to: 24 * 3600000,
                step: 15 * 60000,
                snap: true,
                theme: "theme-blue A",
                scale: scale,
                format: function (val) { return getMillisInHoursMinutes(val) },
                width: 350,
                showLabels: true,
                showScale: false,
                isRange: true,
                onstatechange: hoursAChanged
            });

            $('.dayHoursB').jRange({
                from: 0,
                to: 24 * 3600000,
                step: 15 * 60000,
                snap: true,
                theme: "theme-blue B",
                scale: scale,
                format: function (val) { return getMillisInHoursMinutes(val) },
                width: 350,
                showLabels: true,
                showScale: true,
                isRange: true,
                onstatechange: hoursBChanged
            });

            $('.dayHoursA,.dayHoursB').each(function () {
                var range = $(this);
                range.jRange(range.closest("tr").find(":checkbox").prop("checked") ? "enable" : "disable");
            })


            //compute total
            $("tr.dayCursors").each(function () {
                var tr = $(this);
                computeTotWorkByDay(tr);
            })

        });



        function dayOnOff(el) {
            //console.debug(el);
            var range = el.closest("tr").find(".dayHoursA,.dayHoursB");
            if (!el.prop("checked")) {
                range.jRange("disable");
                range.jRange("setValue", "0,0");
            } else {
                range.jRange("enable");

                range.filter(".dayHoursA").jRange("setValue", "32400000,46800000");
                range.filter(".dayHoursB").jRange("setValue", "54000000,68400000");
            }

        }

        function hoursAChanged(val) {
            //console.debug("hoursAChanged "+valA,this)
            var rangeA = this;
            var inputB = rangeA.inputNode.nextAll(".dayHoursB");
            var valA = val.split(",");
            var valB = inputB.val().split(",");

            if (parseInt(valA[1]) > parseInt(valB[0]))
                inputB.jRange("setValue", valA[1] + "," + Math.max(parseInt(valA[1]), parseInt(valB[1])));

            computeTotWorkByDay(inputB.closest("tr"));
        }

        function hoursBChanged(val) {
            //console.debug("hoursBChanged "+val,this)

            var rangeB = this;
            var inputA = rangeB.inputNode.prevAll(".dayHoursA");
            var valB = val.split(",");
            var valA = inputA.val().split(",");

            if (parseInt(valB[0]) < parseInt(valA[1]))
                inputA.jRange("setValue", valA[0] + "," + Math.min(parseInt(valA[1]), parseInt(valB[0])));
            computeTotWorkByDay(inputA.closest("tr"));
        }


        function computeTotWorkByDay(tr) {
            var valA = tr.find(".dayHoursA").val().split(",");
            var valB = tr.find(".dayHoursB").val().split(",");
            var tot = parseInt(valA[1]) - parseInt(valA[0]) + parseInt(valB[1]) - parseInt(valB[0]);
            tr.find(".totWorkByDay").html(getMillisInHoursMinutes(tot));
        }


        function flatCapacity(el) {
            if (el.is(":checked")) {
                $("#weekCapacity").addClass("disabled faded");
                $("#flatCapacityInput").show();
            } else {
                $("#weekCapacity").removeClass("disabled faded");
                $("#flatCapacityInput").hide();
            }
        }


        function costCenterAddedCallback(costCenter) {
            if (costCenter) {
                $("#COST_CENTER").val(costCenter.id);
                $("#COST_CENTER_txt").val(costCenter.name).focus().blur();
            }

        }


    </script>

    </div>

    <script src="/applications/teamwork/socket/userStatusManagement.js"></script>


    <script>
        var __sns = [];
        $(function () {
            $("body").oneTime(500, function () {
                manageStickyNotes(__sns);
            });

            //event da webSocket
            $("body").on("ws-stickySaved.twScreen", function (e, data) {
                //console.debug("ws-stickySaved.twScreen",data);
                if (data && data.stickyId)
                    twSrc_drawSticky(data.stickyId);
            }).on("ws-logSaved.twScreen", function (e, data) {
                //console.debug("ws-logSaved twScreen",data);
                if (data && data.messageId) {
                    $("#messageListOpener .notificationNumber").html(parseInt($("#messageListOpener .notificationNumber").text()) + 1).show();
                }
            }).on("ws-updateGlobalCounter.twScreen", function (e, data) {
                //console.debug("ws-updateGlobalCounter.twScreen", data);
                if (data) {
                    $("#twChatOpener .notificationNumber").html(data.totalUnreadChats);
                    $("#twChatOpener").data("totalUnreadChats", data.totalUnreadChats);


                    if (data.totalUnreadChats) {
                        //top.twChat.chatWindow.addClass("hasUnreadChats");
                        $("#twChatOpener .notificationNumber").show();
                    } else {
                        //top.twChat.chatWindow.removeClass("hasUnreadChats");
                        $("#twChatOpener .notificationNumber").hide();
                    }
                    // add total unread chats to the top page title
                    top.document.title = (data.totalUnreadChats ? "(" + data.totalUnreadChats + ") Twproject" : "Twproject");
                    top.$("#twfavicon").attr("href", contextPath + "/img/favicons/fav" + (data.totalUnreadChats > 9 ? "N" : data.totalUnreadChats) + ".png?_=" + (Math.random()))
                }
            }).on("ws-socketClosed.twScreen", function (e, data) {
                //alert("服务器连接已经丢失。\n请尝试重新加载页面。")
            }
            );


            //gestione chiusura tutti dopo 2
            var firstClosed = false;
            var doNotAskAgain = false;
            $("body").on("containerHidden", ".container.sticky", function (e) {
                if (firstClosed && !doNotAskAgain) {
                    var firstStick = $(this);
                    var sticks = $(".container.sticky");
                    if (sticks.size() > 2) {
                        doNotAskAgain = true;
                        if (confirm("全部关闭？")) {
                            sticks.each(function () {
                                var stick = $(this);
                                if (stick.attr("status") != "ICONIZED")
                                    if (stick.prop("id") != firstStick.prop("id"))
                                        $(this).trigger("hide");
                            });
                        }
                    }
                    firstClosed = false;

                } else {
                    firstClosed = true;
                }

            });

        });


        function manageStickyNotes(sns) {
            //console.debug("manageStickyNotes",sns);
            if (sns.length > 20) { //non disegna tutto se sono piÃ¹ di 20
                var message = "这有很多便条(--xxx--), 展现所有可能造成浏览器崩溃.您确实想这样做吗?".replace("--xxx--", sns.length);
                var d = $("<div>").append(message + "<br>");
                var closeAll = $("<button>").append("关闭所有").attr("onclick", "closeAllSticky();hideFeedbackMessages()");
                var drawAll = $("<button>").append("所有的绘制").attr("onclick", "twSrc_drawAllSticky(__sns);hideFeedbackMessages()");
                d.append(closeAll).append(drawAll);
                showFeedbackMessage("INFO", d.html(), "");
            } else {
                twSrc_drawAllSticky(sns)
            }
        }


        function twSrc_drawAllSticky(sns) {
            for (var i = 0; i < sns.length; i++) {
                twSrc_drawSticky(sns[i]);
            }
        }
        function twSrc_drawSticky(stickyId) {
            $.get(contextPath + "/applications/teamwork/sticky/partAjaxStickyNote.jsp", { CM: "DRW", sid: stickyId }, function (response) {
                $("#STKN_" + stickyId).remove();
                $("body").append(response);
            })
        }


        function closeAllSticky() {
            $.getJSON(contextPath + "/applications/teamwork/messaging/messageAjaxController.jsp", { CM: "REMOVEEALLSTK" }, function (response) {
                twSrc_drawAllSticky(__sns);//disegna i rimanenti
            });
        }
    </script>
    </div>
    <div id="_errorTemplates" style="display:none;">
        <div class="__template__" type="errorTemplate">
            <!--
            <div style="padding:15px 12px" class="FFC_(#=type#) FFC_Global" type="(#=type#)">
              <table cellpadding="0" cellspacing="0" align="center" style="width:100%;">
                <tr>
                  <td valign="top" width="1" nowrap><img src="/img/(#=type.toLowerCase()#).png"></td>
                  <td valign="middle" class="_errorTemplateMessage" style="padding-left: 3px">(#if(obj.title){#)
                    <b>(#!title#)</b><br>
                    (#}#)(#=message#)<br></td>
                  <td width="1" valign="top" onclick="$(this).parents('div:first').fadeOut(function(){$(this.remove())})"><span class="teamworkIcon" style="cursor:pointer">x</span></td>
                </tr>
              </table>
            </div>
            -->
        </div>
    </div>

    <script>
        $(function () {
            if (false) {
                window.focus();
            }


            $("#_errorTemplates").loadTemplates().remove();
            var _messagesFromController = [];
            if (_messagesFromController.length > 0) {
                for (var i = 0; i < _messagesFromController.length; i++) {
                    showFeedbackMessage(_messagesFromController[i]);
                }
            }


            if (0)
                $("#null").focus();


            showUpgradeMessage();


            // EX liveQuery:  si inizializzano i fields
            $("body").initFields()
        });


        function showUpgradeMessage() {
            var levpg = $(".lreqPage:first");
            if (levpg.size() > 0) {

                var lv = 30;
                var reqLev = levpg.hasClass("lreq30") ? 30 : levpg.hasClass("lreq20") ? 20 : levpg.hasClass("lreq10") ? 10 : 0;
                if (lv > 0 && reqLev > lv) {
                    var str = reqLev == 0 ? "FULL" : reqLev == 5 ? "FREE" : reqLev == 10 ? "BASIC" : reqLev == 20 ? "ADVANCED" : reqLev == 30 ? "ENTERPRISE" : "TRIAL";

                    var wrp = $("<div>").addClass("modalPopup upgradeMessage").css("background", "none");
                    var inn = $("<div>").addClass("bwinPopupd").css({ "max-width": "360px", "min-height": "200px", top: "20%" }).click(function () {
                        location.href = contextPath + "/applications/teamwork/buyTwprojectLicense.jsp?rqlv=" + reqLev;
                    });
                    inn.append($("<h2>").html('Do you need more?'));
                    inn.append($("<p>").html('Your current plan does not include this feature. Upgrade your Twproject to "%%" plan in order to access it.'.replace("%%", str)));
                    //inn.append("<br><br>");
                    inn.append($("<p align='center'>").append($("<span>").addClass("button first").html('Twproject shop')));
                    wrp.append(inn)
                    levpg.after(wrp)
                }
            }
        }



    </script>
</body>
</html>

