
@{
    ViewBag.Title = "TaskList";
    Layout = "~/Areas/app/Views/Shared/_LayoutMain.cshtml";
}

<div id="__FEEDBACKMESSAGEPLACE" style="display:none;"></div>
<div id="twInnerContainer" class="null">
    <form enctype="application/x-www-form-urlencoded" method="POST" action="/app/task/taskList" name="TASK_LIST" id="TASK_LIST" savedAction="" savedTarget="">
        <input type="hidden" id="TASK_LISTV_ID" name="V_ID" value="1896357331" savedValue="">
        <input type="hidden" id="TASK_LISTCM" name="CM" value="FN" savedValue="">

        <div class="mainColumn">
            <h1 class="filterTitle" defaultTitle="任务列表">
                开始的任务
            </h1>

            <input type=hidden name="NAME_DESCRIPTION_NOTE_CODE" id="NAME_DESCRIPTION_NOTE_CODE" size=1 autocomplete='off' maxlength=255 value="">

            <script type="text/javascript">

                (function () {
                    var cvd = {
                        values: [
                            { "code": "STATUS_ACTIVE", "color": "#3BBF67", "value": "进行中", "enabled": true, "textColor": "#FFFFFF", "index": 1 },
                            { "code": "STATUS_WAITING", "color": "#F79136", "value": "等候", "enabled": true, "textColor": "#FFFFFF", "index": 2 },
                            { "code": "STATUS_SUSPENDED", "color": "#F9C154", "value": "暂停", "enabled": true, "textColor": "#000000", "index": 3 },
                            { "code": "STATUS_DONE", "color": "#6EBEF4", "value": "完成", "enabled": true, "textColor": "#000000", "index": 4 },
                            { "code": "STATUS_FAILED", "color": "#763A96", "value": "失败", "enabled": true, "textColor": "#FFFFFF", "index": 5 },
                            { "code": "STATUS_UNDEFINED", "color": "#dededf", "value": "未定义", "enabled": true, "textColor": "#000000", "index": 6 },
                            { "code": "", "color": "gray", "value": "全部", "enabled": true, "textColor": "#FFFFFF", "index": 7 }]
                    };

                    _colorValueData["TASKSTATUSFILTER"] = cvd;

                })();
            </script>

            @* 查询条件初始化 *@
            <div class="filterBar clearfix">
                <div class="filterActiveElements"></div>

                <div class="filterInactiveElements">
                    <div class="filterElement filterDefault">
                        <label for="CODE" class=" ">代码</label><br>
                        <input type=TEXT name="CODE" id="CODE" size=8 class="formElements qbe" autocomplete='off' maxlength=255 value="">
                    </div>
                    <div class="filterElement filterDefault">
                        <label for="NAME_DESCRIPTION" class=" ">任务名称/描述/注释</label><br>
                        <input type=TEXT name="NAME_DESCRIPTION" id="NAME_DESCRIPTION" size=25 class="formElements qbe" autocomplete='off' maxlength=255 value="">
                    </div>
                    <div class="filterElement">

                        <label for="domId_218238168">任务状态</label><br>
                        <div class="cvcComponent cvcMultiSelect cvcDisplayValue cvcShowOpener " style="cursor:pointer;" cvcType="TASKSTATUSFILTER" displayValue='true'>
                            <input type=hidden name="STATUS" id="STATUS" size=2 class="formElements" autocomplete='off' maxlength=255 value="STATUS_ACTIVE">
                            <div class="cvcColorSquare" onClick="cvc_clickColValSel($(this),event);">
                                <div class="cvcStatuses ellipsis">
                                    <div class="cvcSelBox " title="进行中" code="STATUS_ACTIVE" style=" ">
                                        <span class="teamworkIcon" style="color:#3BBF67">&#169;</span>
                                        <span class="cvcDescription">进行中</span>
                                    </div>
                                </div><span class="teamworkIcon menuArrow">&ugrave;</span>
                            </div>
                        </div>
                    </div>
                    <div class="filterElement">
                        <label for="TASK_ID" class=" ">Id (db)</label><br>
                        <input type=text name="TASK_ID" id="TASK_ID" size=3 class="formElements qbe" autocomplete='off' maxlength=255 value="">
                    </div>
                    <div class="filterElement">

                        <script type="text/javascript">

                            (function () {
                                var cvd = { values: [{ "code": "", "color": "gray", "value": "- 选择 -", "enabled": true, "textColor": "#FFFFFF", "index": 1 }] };


                                _colorValueData["TTMS"] = cvd;

                            })();
                        </script>



                        <label for="domId_1948061277">类型</label><br> <div class="cvcComponent noBall cvcMultiSelect cvcDisplayValue cvcShowOpener " style="cursor:pointer;" cvcType="TTMS" displayValue='true'>
                            <input type=hidden name="TYPES" id="TYPES" size=2 class="formElements" autocomplete='off' maxlength=255 value=""><div class="cvcColorSquare" onClick="cvc_clickColValSel($(this),event);">
                                <div class="cvcStatuses ellipsis">
                                    <div class="cvcSelBox " title="- 选择 -" code=""
                                         style=" "><span class="teamworkIcon" style="color:gray">&#169;</span><span class="cvcDescription">- 选择 -</span></div>
                                </div><span class="teamworkIcon menuArrow">&ugrave;</span>
                            </div>

                        </div>
                    </div>
                    <div class="filterElement"><label for="PROGRESS" class=" ">进度</label><br><input type=text name="PROGRESS" id="PROGRESS" size=4 class="formElements qbe" autocomplete='off' maxlength=255 value=""> %</div>
                    <div class="filterElement"><label for="RELEVANCE" class=" ">重要性</label><br><input type=text name="RELEVANCE" id="RELEVANCE" size=4 class="formElements qbe" autocomplete='off' maxlength=255 value=""> %</div>
                    <div class="filterElement">
                        <label for="START" class=" ">开始日期</label><br><input type=text name="START" id="START" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="STARTs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                       onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="END" class=" ">结束日期</label><br><input type=text name="END" id="END" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="ENDs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                 onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="ASSIGNEE_txt" class=" ">责任人</label><br>
                        <input type=text name="ASSIGNEE_txt" id="ASSIGNEE_txt" size=15 class="formElements smartCombo" autocomplete='off' maxlength=255
                               onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)"
                               onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,true );"
                               onKeyDown="manageKeyEvent ($(this),event,false,true);"
                               onKeyPress="stopKeyEvent(event);" value="Wing Dream">
                        <span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px'
                              onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span>
                        <input type=hidden name="ASSIGNEE" id="ASSIGNEE" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="15089">
                    </div>
                    <div class="filterElement">
                        <label for="ROLE_txt" class=" ">角色</label><br><input type=text name="ROLE_txt" id="ROLE_txt" size=15 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,true );" onKeyDown="manageKeyEvent ($(this),event,false,true);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="ROLE" id="ROLE" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="">
                    </div>
                    <div class="filterElement">
                        <label for="LAST_MODIFIED" class=" ">最后编辑</label><br><input type=text name="LAST_MODIFIED" id="LAST_MODIFIED" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="LAST_MODIFIEDs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                               onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="ASSIGNMENT_CREATOR_txt" class=" ">分工的创建者</label><br><input type=text name="ASSIGNMENT_CREATOR_txt" id="ASSIGNMENT_CREATOR_txt" size=15 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,false );" onKeyDown="manageKeyEvent ($(this),event,false,false);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="ASSIGNMENT_CREATOR" id="ASSIGNMENT_CREATOR" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="">
                    </div>
                    <div class="filterElement">
                        <label for="SUBTASK_OF_txt" class=" ">项目任务</label><br><input type=text name="SUBTASK_OF_txt" id="SUBTASK_OF_txt" size=15 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,false );" onKeyDown="manageKeyEvent ($(this),event,false,false);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="SUBTASK_OF" id="SUBTASK_OF" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="">
                    </div>
                    <div class="filterElement">
                        <label for="AREA" class=" ">域</label><br><SELECT NAME="AREA" id="AREA" CLASS="formElements">
                            <option value="">- 选择 -</option>
                            <option value="5819">梦想飞扬</option>
                        </SELECT>
                    </div>
                    <div class="filterElement">
                        <label for="MILESTONE" class=" ">里程碑</label><br><input type=text name="MILESTONE" id="MILESTONE" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="MILESTONEs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                  onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="ROOT_OR_STANDALONE" class=" ">项目/任务</label><br><SELECT NAME="ROOT_OR_STANDALONE" id="ROOT_OR_STANDALONE" CLASS="formElements">
                            <option value="">全部</option>
                            <option value="yes">项目</option>
                            <option value="no">相</option>
                        </SELECT>
                    </div>
                    <div class="filterElement">
                        <label for="ENABLED_ASSIGNMENT" class=" ">启用分配</label><br><SELECT NAME="ENABLED_ASSIGNMENT" id="ENABLED_ASSIGNMENT" CLASS="formElements">
                            <option value="">全部</option>
                            <option value="yes">可见</option>
                            <option value="no">残</option>
                        </SELECT>
                    </div>
                    <div class="filterElement"><label for="TASK_TAGS" class=" ">标签</label><br><input type=text name="TASK_TAGS" id="TASK_TAGS" size=20 class="formElements tagBox" autocomplete='off' maxlength=255 autocomplete='off' taggableClass="com.twproject.task.Task" maxResult="30" tagPropertyName="tags" areaId="5819" value=""></div>
                    <div class="filterElement centered">
                        <input type=hidden name="MILES_OVER" id="MILES_OVER" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_MILES_OVER" name="ck_MILES_OVER" value="yes"
                                                                                                                                                                    onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');">
                        &nbsp;<label for="ck_MILES_OVER">逾期里程碑</label>&nbsp;
                    </div>
                    <div class="filterElement centered">
                        <input type=hidden name="BUDGET_OVERFLOW" id="BUDGET_OVERFLOW" size=1 autocomplete='off' maxlength=255 data-checkfield value="no" oldValue='1'><input type="checkbox" id="ck_BUDGET_OVERFLOW" name="ck_BUDGET_OVERFLOW" value="yes"
                                                                                                                                                                              onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');">
                        &nbsp;<label for="ck_BUDGET_OVERFLOW">预算超支</label>&nbsp;
                    </div>
                    <div class="filterElement ">
                        <label for="COLOR">颜色</label><br>
                        <span class="colorChooserGroup">
                            <input type=text name="COLOR" id="COLOR" size=2 class="formElements colorChooserField" autocomplete='off' maxlength=255 value="" oldValue='1'>
                        </span>
                        <script type="text/javascript">

                            var defs = [
                                initialize(contextPath + "/commons/js/jquery/spectrum/spectrum.css?_=65022", "css"),
                                initialize(contextPath + "/commons/js/jquery/spectrum/tw_spectrum.css?_=65022", "css"),
                                initialize(contextPath + "/commons/js/jquery/spectrum/spectrum.js?_=65022", "script")
                            ];

                            $.when.apply(null, defs).done(function () {
                                /*
                                 SPECTRUM color chooser
                                 https://bgrins.github.io/spectrum/#why-customizable

                                 color: tinycolor,
                                 flat: bool,
                                 showInput: bool,
                                 showInitial: bool,
                                 allowEmpty: bool,
                                 showAlpha: bool,
                                 disabled: bool,
                                 localStorageKey: string,
                                 showPalette: bool,
                                 showPaletteOnly: bool,
                                 togglePaletteOnly: bool,
                                 showSelectionPalette: bool,
                                 clickoutFiresChange: bool,
                                 cancelText: string,
                                 chooseText: string,
                                 togglePaletteMoreText: string,
                                 togglePaletteLessText: string,
                                 containerClassName: string,
                                 replacerClassName: string,
                                 preferredFormat: string,
                                 maxSelectionSize: int,
                                 palette: [[string]],
                                 selectionPalette: [string]
                                 */


                                $("#COLOR").spectrum({
                                    color: $("#COLOR").val(),
                                    allowEmpty: true,
                                    palette: [["#464646", "#696969", "#8C8C8C", "#AFAFAF", "#D2D2D2", "#F5F5F5"], ["#CF0B0B", "#F22E2E", "#FF5151", "#FF7474", "#FF9797", "#FFBABA"], ["#FD9812", "#FFBB35", "#FFDE58", "#FFFF7B", "#FFFF9E", "#FFFFC1"], ["#18A106", "#3BC429", "#5EE74C", "#81FF6F", "#A4FF92", "#C7FFB5"], ["#0C40A3", "#2F63C6", "#5286E9", "#75A9FF", "#98CCFF", "#BBEFFF"], ["#9929ED", "#BC4CFF", "#DF6FFF", "#FF92FF", "#FFB5FF", "#FFD8FF"]],
                                    showInput: false,
                                    showPaletteOnly: true,
                                    showPalette: false,
                                    hideAfterPaletteSelect: false,
                                    preferredFormat: "hex",

                                    show: function (color) {
                                        $("#COLOR").spectrum("option", "hideAfterPaletteSelect", true);

                                        if (true) {

                                            var clearButton = $("<div class='clear-palette' title='Clear color'>删除</div>");
                                            clearButton.on("click.spectrum", function (e) {
                                                e.preventDefault();
                                                e.stopPropagation();
                                                $(".sp-clear").click();
                                                $("#COLOR").val("").spectrum("hide");
                                            });
                                            $('.sp-palette').append(clearButton);

                                        }
                                    }

                                });

                            });
                        </script>


                    </div>
                    <div class="filterElement">
                        <label for="LAST_POST" class=" ">最好发表</label><br><input type=text name="LAST_POST" id="LAST_POST" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="LAST_POSTs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                   onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="CREATED_ON" class=" ">创建</label><br><input type=text name="CREATED_ON" id="CREATED_ON" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="CREATED_ONs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                    onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="ASSIG_CREATED_ON" class=" ">Assignment created on</label><br><input type=text name="ASSIG_CREATED_ON" id="ASSIG_CREATED_ON" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="ASSIG_CREATED_ONs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                                                         onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement">
                        <label for="STATUS_CHANGE_DATE" class=" ">状态变更日期</label><br><input type=text name="STATUS_CHANGE_DATE" id="STATUS_CHANGE_DATE" size=8 class="formElements dateField qbe" autocomplete='off' maxlength=255 format="yyyy-M-d" value="" entryType="DATE" maxValue="3020-11-18" minValue="1020-10-28"><span title="日历" id="STATUS_CHANGE_DATEs_inputDate" class="teamworkIcon openCalendar"
                                                                                                                                                                                                                                                                                                                                onclick="var inp=$(this).prevAll(':input:first');$(this).dateField({inputField:inp,dateFormat:inp.attr('format'),isSearchField:true,minDate:inp.attr('minValue'),maxDate:inp.attr('maxValue'),disableHolidays:false});">m</span>

                    </div>
                    <div class="filterElement centered">
                        <input type=hidden name="RECENTLY_USED" id="RECENTLY_USED" size=1 autocomplete='off' maxlength=255 data-checkfield value="no"><input type="checkbox" id="ck_RECENTLY_USED" name="ck_RECENTLY_USED" value="yes"
                                                                                                                                                             onClick="$(this).prevAll('[type=hidden]:first').val(this.checked ? 'yes' : 'no');">
                        &nbsp;<label for="ck_RECENTLY_USED">最近浏览过的</label>&nbsp;
                    </div>
                    <div class="filterElement">
                        <label for="CUST_ID_txt" class=" ">顾客</label><br><input type=text name="CUST_ID_txt" id="CUST_ID_txt" size=30 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,false );" onKeyDown="manageKeyEvent ($(this),event,false,false);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="CUST_ID" id="CUST_ID" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="">
                    </div>
                    <div class="filterElement">
                        <label for="PROJECTMANAGER_ID_txt" class=" ">Project manager</label><br><input type=text name="PROJECTMANAGER_ID_txt" id="PROJECTMANAGER_ID_txt" size=30 class="formElements smartCombo" autocomplete='off' maxlength=255 autocomplete="off" onfocus="createDropDown($(this),400,100); refreshDropDown ($(this).nextAll('.cbDropDown'),$(this)); setSelection(this,0,1024)" onblur="finalizeOperation($(this).nextAll('.cbDropDown:first'),false,false );" onKeyDown="manageKeyEvent ($(this),event,false,false);" onKeyPress="stopKeyEvent(event);" value=""><span class="teamworkIcon menuArrow" style='cursor:pointer; margin-left: -15px' onClick="if ( $(this).prevAll('.cbDropDown:first').size()<=0) {$(this).prevAll('input:text:first').focus();} " style="">&ugrave;</span><input type=hidden name="PROJECTMANAGER_ID" id="PROJECTMANAGER_ID" size=10 class="formElements" autocomplete='off' maxlength=255 jspPart='partSmartCombo' value="">
                    </div>
                    <div class="filterElement"><label for="NOTES" class=" ">交付的成果</label><br><input type=TEXT name="NOTES" id="NOTES" size=15 class="formElements qbe" autocomplete='off' maxlength=255 value=""></div>





                </div>
                <div class="filterButtons">
                    <div class="filterButtonsElement filterAdd">
                        <span class="button" id="filterSelectorOpener" title="更多的过滤器"
                              onclick="bjs_showMenuDiv('filterSelectorBox', 'filterSelectorOpener');">
                            <span class="teamworkIcon">f</span>
                        </span>
                    </div>
                    <div class="filterButtonsElement filterSearch">
                        <button type="button" class="button noprint    " id="domId_393137906" style=""
                                onclick="dataTableSearchClick('TSKLST');return false; " data-dtid="TSKLST">
                            搜索
                        </button>

                    </div>

                    <div class="filterActions">
                        <div class="filterButtonsElement filterSave">
                            <span onclick="lsfOpenEditor($(this))" lsfId="domId_79779418" title="保存这个搜索" class="button textual">保存这个搜索</span>
                        </div>
                        <div class="filterButtonsElement filterHelp">
                            <button type="button" class="button noprint textual   " id="domId_907812649" style="" title="如何使用示例查询（QBE）组成强大的搜索.<br>您可以保存您的搜索条件以便将来使用."
                                    onclick="openBlackPopup('/commons/help/qbe.jsp?V_ID=1245714636','800px','700px');return false; ">
                                Help
                            </button>

                        </div>
                    </div>

                </div>
            </div>

            <script src="/commons/js/filterEngine.js"></script>

            <div style="position: relative">
                <div class="paginator unselectable" dataTableId="TSKLST">
                    <span class="paginatorPages"></span>

                    <div class="datatableInfo">
                        <div class="paginatorSearching">搜索...</div>
                        <div class="paginatorNotFound">没有找到结果。</div>
                        <span class="paginatorFoundN"><span class="totalNumberOfElements"></span>&nbsp;个结果</span>
                        <span class="paginatorFound1">1 &nbsp;我打。.</span>
                        &nbsp;&nbsp;
                        <div class="pagSize">
                            <span class="ruzzol teamworkIcon" style="cursor:pointer;"
                                  onclick="$(this).toggle();$(this).next().toggle().find(':input').focus();" title="改变页面大小">g</span>
                            <span class="pagSizeInp">
                                <label for="_FP_PG_S" class=" ">每页的结果</label>&nbsp;
                                <input type=text name="_FP_PG_S" id="_FP_PG_S" size=3 class="formElements formElementsSmall validated integer" autocomplete='off' maxlength=255 value="20"
                                       onkeyup="if (event.keyCode==13) { event.stopPropagation(); dataTableChangePageSize($('#TSKLST'));event.preventDefault();return false;}" entryType="INTEGER">
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <input type=hidden name="_FP_PG_N" id="TSKLST_PGtf" size=20 class="formElements" autocomplete='off' maxlength=255 value="">
            <table class="table dataTable fixHead fixFoot" id="TSKLST" formId="TASK_LIST" bindReturnKey data-table="1">

                <thead class="dataTableHead">
                    <tr>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.status" onclick="dataTableChangeOrder($(this),'TSKLST')">状态</span></th>
                        <th class="tableHead" id="headTaskName" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.name" onclick="dataTableChangeOrder($(this),'TSKLST')">名称</span></th>
                        <th class="tableHead" nowrap style="width:1%;"><span class="tableHeadEl" orderState="0" orderingHql="task1.code" onclick="dataTableChangeOrder($(this),'TSKLST')">代码</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.type" onclick="dataTableChangeOrder($(this),'TSKLST')">类型</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.schedule.start" onclick="dataTableChangeOrder($(this),'TSKLST')">开始日期</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.schedule.end" onclick="dataTableChangeOrder($(this),'TSKLST')">结束日期</span></th>
                        <th class="tableHead" nowrap style="width:1%;"><span class="tableHeadEl" orderState="0" orderingHql="task1.progress" onclick="dataTableChangeOrder($(this),'TSKLST')">%</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.totalIssuesOpen" onclick="dataTableChangeOrder($(this),'TSKLST')">问题</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl" orderState="0" orderingHql="task1.totalWorklogDone" onclick="dataTableChangeOrder($(this),'TSKLST')">已完成工时</span></th>
                        <th class="tableHead" nowrap style="width:1%;"><span class="tableHeadEl"></span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl">责任人</span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl"><span class=teamworkIcon title=讨论>&#x2b2d;</span></span></th>
                        <th class="tableHead" nowrap style=""><span class="tableHeadEl"><span class=teamworkIcon title=文档>n</span></span></th>
                    </tr>
                    <tr style="display: none;"><td colspan="99"><input type=hidden name="OB_TSKLST" id="OB_TSKLST" size=0 class="formElements" autocomplete='off' maxlength=255 value=""></td></tr>
                </thead>

                <tbody noData class="dataTableBody" totalNumberOfElements="0" pageNumber="0" pageSize="0"></tbody>
            </table>

            <div class="paginator unselectable" dataTableId="TSKLST">


                <span class="paginatorPages"></span>


                <div class="datatableInfo">



                </div>

            </div>

            <br>
            @* 没有课题的时候，显示的添加功能 *@
            <div id="no_task_add_box" class="footerWarningWrapper" style="display: none;">

                <div class="footerWarning" style="width: 33%">

                    <div><span class="teamworkIcon" style="font-size:40px">t</span></div>
                    <div>
                        <button type="button" class="button noprint    " id="domId_2003309350" style=""
                                onclick="openBlackPopup('/app/task/taskNew.html?V_ID=1432073097&CM=AD','800px','720px');return false; ">
                            <span class='teamworkIcon withLabel'>P</span>新建项目
                        </button>
                    </div>
                    <p>创建一个新的项目，其中包含的任务和子任务。任务的树结构可以被看作是甘特图。</p>
                </div>

                <div class="footerWarning" style="width: 33%">
                    <div>
                        <span class="teamworkIcon" style="font-size:50px">&pound;</span>
                    </div>
                    <div></div>
                    <p>创建一个项目的业务流程。因为你必须验证的过程中，却是一个比较复杂的项目树结构，例子的过程。</p>
                </div>

                <div class="footerWarning" style="width: 33%">
                    <div>
                        <span class="teamworkIcon" style="font-size:50px">K</span>
                    </div>
                    <div>
                        <a class="button     " id="domId_1371627784" style="" href="/applications/teamwork/task/scrum/projectWizard.jsp?V_ID=1853434268">
                            <span class='teamworkIcon withLabel'>P</span>创建 scrum
                        </a>
                    </div>
                    <p>我们将创建一个项目，与球队的合同中使用Scrum方法：Sprint公司，临时会议。 <a href="http://en.wikipedia.org/wiki/Scrum_%28development%29" target="_blank">Scrum Wikipedia</a></p>
                </div>
            </div>

        </div>

        <div class="rightColumn noprint">
            <div class="tools">
                @* 添加下拉框 *@
                <div class="toolsElement">
                    <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_514226905', 'domId_174952064');  ">
                        <button type="button" class="button noprint    first" id="domId_174952064" style="" onclick=";return false; ">
                            <span class='teamworkIcon withLabel'>P</span>添加...
                        </button>
                    </span>

                    <div id="divdomo_domId_514226905" class="divomo " style=" position: absolute;left:-10000px; top:-10000px;">
                        <div class="divomoArrow"></div>
                        <div>
                            <button type="button" class="button noprint textual   " id="domId_1476193302" style=""
                                    onclick="openBlackPopup('/app/task/taskNew.html?V_ID=1137396807&CM=AD','800px','720px');return false; ">
                                + 新建项目
                            </button>
                            <button type="button" class="button noprint textual   lreq20 lreqLabel" id="domId_1754144151" style=""
                                    onclick="openBlackPopup('/applications/teamwork/task/taskAddFromTemplate.jsp?V_ID=502252923&CM=AD&OBJID=newEmptyId','800px','650px');return false; ">
                                + 从模板创建项目
                            </button>
                            <a class="button  textual   " id="domId_1245239841" style="" href="/applications/teamwork/task/scrum/projectWizard.jsp?V_ID=843720591">+ 创建 scrum</a>
                        </div>
                    </div>
                </div>

                @* 导入导出 *@
                <div class="toolsElement">
                    <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_753734579', 'domId_577451796');  ">
                        <button type="button" class="button noprint  icon  menuArrow " id="domId_577451796" style="" title="进口/出口" onclick=";return false; ">
                            <span class='teamworkIcon '>I</span>
                        </button>
                    </span>

                    <div id="divdomo_domId_753734579" class="divomo "
                         style=" position: absolute;left:-10000px; top:-10000px;">

                        <div class="divomoArrow"></div>

                        <div>
                            <button type="button" class="button noprint textual   lreq20 lreqLabel lreqActive" id="domId_791735558" style="" onclick="openBlackPopup('/applications/teamwork/task/taskImportMPX.jsp?V_ID=11035600','750px','500px');return false; ">导入: MS Project</button>

                            <button type="button" class="button noprint textual   lreq10 lreqLabel" id="domId_201037774" style="" onclick="openBlackPopup('/applications/teamwork/task/taskImportJSON.jsp?V_ID=890846494','500px','500px');return false; ">从JSON文件导入</button>

                            <a class="button  textual   " id="domId_850090887" style="" href="/applications/teamwork/task/taskImportGantt.jsp?V_ID=893891179">从甘特服务导入</a>

                            <hr><button type="button" class="button noprint textual   " id="domId_268834318" style="" onClick="stopBubble(event);saveFormValues('TASK_LIST');  obj('TASK_LISTCM').value='FN';obj('TASK_LIST').target='_blank'; obj('TASK_LIST').action='/applications/teamwork/task/taskListExportJSON.jsp?V_ID=2140272985'; try {obj('TASK_LIST').submit();} catch(e){};restoreFormValues('TASK_LIST');  ">导出到JSON</button>

                            <button type="button" class="button noprint textual   lreq20 lreqLabel" id="domId_1216971645" style="" onClick="stopBubble(event);saveFormValues('TASK_LIST');  obj('TASK_LISTCM').value='EXPORT';obj('TASK_LISTBUTTON_ID').value='domId_1216971645';obj('TASK_LIST').action='/commons/tools/exportXLS.jsp'; try {obj('TASK_LIST').submit();} catch(e){};restoreFormValues('TASK_LIST');  ">导出到Excel</button>

                        </div>
                    </div>
                </div>
                @* 打印 *@
                <div class="toolsElement">
                    <span class="menuArrow" onclick="bjs_showMenuDiv('divdomo_domId_471796493', 'btn_print');  ">
                        <button type="button" class="button noprint  icon  " id="btn_print" style="" title="打印" onclick=";return false; "><span class='teamworkIcon '>p</span></button>


                    </span>

                    <div id="divdomo_domId_471796493" class="divomo "
                         style=" position: absolute;left:-10000px; top:-10000px;">

                        <div class="divomoArrow"></div>

                        <div>
                            <button type="button" class="button noprint textual   " id="btn_gnt_print" style="" onclick="submitInBlack('TASK_LIST','/applications/teamwork/task/taskListPrint.jsp');return false; ">打印</button>

                            <button type="button" class="button noprint textual   " id="btn_ttlp" style="" onclick="submitInBlack('TASK_LIST','/applications/teamwork/task/taskTreeListPrint.jsp');return false; ">打印工作记录明细</button>

                            <hr><button type="button" class="button noprint textual   lreq30 lreqLabel" id="domId_222805162" style="" onClick="stopBubble(event);saveFormValues('TASK_LIST');  obj('TASK_LISTCM').value='FN';obj('TASK_LISTreportName').value='projectProgress';obj('TASK_LIST').target='_blank'; obj('TASK_LIST').action='/applications/teamwork/task/taskIReportHelper.jsp'; try {obj('TASK_LIST').submit();} catch(e){};restoreFormValues('TASK_LIST');  ">project  progress</button>

                            <button type="button" class="button noprint textual   lreq30 lreqLabel" id="domId_1622361013" style="" onclick="generatePluginLink('/applications/teamwork/plugins/taskCustomExcel.jsp',0,0,false);return false; ">taskCustomExcel</button>

                        </div>
                    </div>
                </div>
            </div>

            @* 右侧过滤器 *@
            <div class="rightColumnInner">
                <div class="noprint filters">
                    <h2>我的过滤器...</h2>
                    <div class="customSavedFilters" formId="TASK_LIST" category="TASK" id="domId_79779418">
                        <input type="hidden" name="FLNMSEL" id="FLNMSEL">
                        <input type="hidden" name="FLCAT" id="FLCAT" value="TASK">
                        <input type="hidden" name="FLNM" id="FLNM" value="">
                    </div>
                    <script type="text/javascript">
                        $(function () {
                            $("#TASK_LIST").append($("#domId_79779418 input")); //sposta gli input dentro il form
                            var bts = [];
                            var div = $("#domId_79779418");
                            for (var i = 0; i < bts.length; i++) {
                                div.append(lsfCreateButton(bts[i]));
                            }
                        });
                    </script>

                    <div class="separator"></div>
                    <a class="button  textual   " id="domId_2028353044" style="" href="/app/task/taskList?V_ID=2107150372&CM=FN&FLNM=PF_MY_OPEN_PROJECT">我的项目</a>
                    <a class="button  textual  focused " id="domId_723479527" style="" href="/app/task/taskList?V_ID=1607271511&CM=FN&FLNM=PF_MY_OPEN_TASK">开始的任务</a>
                    <a class="button  textual   " id="domId_215489764" style="" href="/app/task/taskList?V_ID=1984388474&CM=FN&FLNM=PF_MY_OVERDUE_TASK">延期的任务</a>
                    <a class="button  textual   " id="domId_1196044608" style="" href="/app/task/taskList?V_ID=551646278&CM=FN&FLNM=PF_MY_FORTHCOMING_MILESTONES">下一个里程碑</a>
                    <a class="button  textual   " id="domId_832090247" style="" href="/app/task/taskList?V_ID=1344068933&CM=FN&FLNM=PF_MY_FORTHCOMING_STARTS">即将开始的项目</a>
                    <a class="button  textual   " id="domId_386074138" style="" href="/app/task/taskList?V_ID=368936676&CM=FN&FLNM=PF_MY_FORTHCOMING_ENDS">即将结束的项目</a>
                    <a class="button  textual   " id="domId_933424643" style="" href="/app/task/taskList?V_ID=2015509143&CM=FN&FLNM=PF_MY_JUST_CLOSED">最近关闭的任务</a>
                    <a class="button  textual   " id="domId_255118623" style="" href="/app/task/taskList?V_ID=823667994&CM=FN&FLNM=PF_OPEN_PROJECT">进行中的项目</a>
                    <a class="button  textual   " id="domId_708386596" style="" href="/app/task/taskList?V_ID=2121942969&CM=FN&FLNM=PF_OPEN_TASK">进行中的任务</a>
                    <a class="button  textual   " id="domId_234554254" style="" href="/app/task/taskList?V_ID=1655130937&CM=FN&FLNM=PF_FORTHCOMING_MILESTONES">下一个里程碑 (全部)</a>
                    <a class="button  textual   " id="domId_1429978568" style="" href="/app/task/taskList?V_ID=1990400033&CM=FN&FLNM=PF_MILESTONES_OVERDUE">逾期里程碑</a>
                    <a class="button  textual   " id="domId_1300585312" style="" href="/app/task/taskList?V_ID=498151283&CM=FN&FLNM=PF_BUDGET_OVERFLOW">预算超支</a>
                    <a class="button  textual   " id="domId_1537357375" style="" href="/app/task/taskList?V_ID=1488386939&CM=FN&FLNM=PF_FORTHCOMING_STARTS">即将开始的项目 (全部)</a>
                    <a class="button  textual   " id="domId_1429763517" style="" href="/app/task/taskList?V_ID=1275550023&CM=FN&FLNM=PF_FORTHCOMING_ENDS">即将结束的项目 (全部)</a>
                    <a class="button  textual   " id="domId_1987472207" style="" href="/app/task/taskList?V_ID=225049937&CM=FN&FLNM=PF_OVERDUE_TASK">已超时的项目 (全部)</a>
                    <a class="button  textual   " id="domId_695588792" style="" href="/app/task/taskList?V_ID=336847691&CM=FN&FLNM=PF_JUST_CLOSED">最近关闭的任务 (全部)</a>
                    <a class="button  textual   " id="domId_632249145" style="" href="/app/task/taskList?V_ID=190498967&CM=FN&FLNM=PF_LAST_MODIFIED">最近修改过的</a>
                    <a class="button  textual   " id="domId_1965504339" style="" href="/app/task/taskList?V_ID=725540240&CM=FN&FLNM=PF_RECENTLY_USED">最近浏览过的</a>
                </div>
                <div class="noprint recent">
                    <h2>最近访问的项目/任务</h2>
                    <a class="button  textual   " id="domId_2029179636" style="" href="/app/task/taskOverview??V_ID=138717117&CM=ED&OBJID=53596">T#T53596#  第二个项目</a>
                    <a class="button  textual   " id="domId_1141698877" style="" href="/app/task/taskOverview??V_ID=13135758&CM=ED&OBJID=53595">T#T53595#  第一个项目</a>
                    <a class="button  textual   " id="domId_1489916350" style="" href="/app/task/taskOverview??V_ID=423783403&CM=ED&OBJID=53597">T#T53596.01#  第一个子任务</a>
                </div>
            </div>
        </div>

        <input type="hidden" id="TASK_LISTBUTTON_ID" name="BUTTON_ID" value="" savedValue="">
        <input type="hidden" id="TASK_LISToutType" name="outType" value="" savedValue="">
        <input type="hidden" id="TASK_LISTreportName" name="reportName" value="" savedValue="">

    </form>

    <script>
        $("#TASK_MENU").addClass('selected');
        //inject the table search
        createTableFilterElement($("#headTaskName"), ".dataTable .taskRow", ".tlTaskCode,.tlTaskName");

        //chiamata ogni volta che si rinfresca la tabella
        function dataTableCallback(totalNumberOfElements) {
            //console.debug("Task List, dataTableCallback",totalNumberOfElements);
            if (totalNumberOfElements > 0) {
                $("#btn_ttlp,#btn_gnt_print,#btn_print").removeAttr("disabled").show();
                $("#no_task_add_box").hide();
            } else {
                $("#btn_ttlp,#btn_gnt_print,#btn_print").attr("disabled", true).hide();
                $("#no_task_add_box").show();
            }
        }

        function openChangeStatusDialog(el) {
            var taskRow = el.closest("[taskId]");
            var taskId = taskRow.attr("taskId");
            openBlackPopup("taskStatusChanger.jsp?taskId=" + taskId, 380, 380, function () { dataTableRefresh($("#TSKLST")) })
        }

    </script>
</div>


